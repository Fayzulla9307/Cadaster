{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport OkModal from \"../components/OkModal.vue\";\nexport default {\n  name: \"ComponentSelectionModal\",\n  props: [\"deposit_id\", \"mine_area_id\"],\n  data() {\n    return {\n      components: [],\n      header: \"Выбор полезного ископаемого\",\n      selectedComponentId: null,\n      showError: false,\n      errorMessage: \"Для данного месторождения отсутствуют записи по полезным ископаемым! Вам стоит выбрать полезное ископаемое или отменить действия мастера!\",\n      errorHeader: \"Нет данных по полезным ископаемым\"\n    };\n  },\n  methods: {\n    hideErrorMessage() {\n      this.getAllComponents();\n    },\n    getAllComponents() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      };\n      const url = this.$BASE_URL + \"/api/get_dictionary_contents/\";\n      axios.post(url, {\n        category: \"SPR_POL\",\n        offset: 0,\n        limit: 10000\n      }, {\n        headers\n      }).then(response => {\n        if (!response.data[0].auth_fail) {\n          var result = response.data[0].result;\n          this.components = [];\n          for (var i = 0; i < result.length; i++) {\n            this.components.push({\n              deposit_id: this.deposit_id,\n              mine_area_id: this.mine_area_id,\n              component_id: result[i].id,\n              component_name: result[i].description\n            });\n          }\n          this.showError = false;\n        }\n      });\n    },\n    getComponentsForDeposit() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      };\n      const url = this.$BASE_URL + \"/api/get_available_components_for_deposit/\";\n      axios.post(url, {\n        deposit_id: this.deposit_id,\n        mine_area_id: this.mine_area_id\n      }, {\n        headers\n      }).then(response => {\n        if (!response.data[0].auth_fail) {\n          this.components = response.data[0].result;\n          if (this.components.length == 0) {\n            this.showError = true;\n          }\n        }\n      });\n    },\n    cancel() {\n      this.$emit(\"cancel\", {});\n    },\n    confirm() {\n      if (this.selectedComponentId == null) {\n        this.errorHeader = \"Ошибка при вводе данных\";\n        this.errorMessage = \"Не выбрано полезное ископаемое!\";\n        this.showError = true;\n      } else {\n        this.$emit(\"confirm\", {\n          deposit_id: this.deposit_id,\n          mine_area_id: this.mine_area_id,\n          component_id: this.selectedComponentId\n        });\n      }\n    }\n  },\n  components: {\n    OkModal\n  },\n  mounted() {\n    this.getAllComponents();\n  }\n};","map":{"version":3,"names":["axios","OkModal","name","props","data","components","header","selectedComponentId","showError","errorMessage","errorHeader","methods","hideErrorMessage","getAllComponents","token","sessionStorage","getItem","headers","Authorization","url","$BASE_URL","post","category","offset","limit","then","response","auth_fail","result","i","length","push","deposit_id","mine_area_id","component_id","id","component_name","description","getComponentsForDeposit","cancel","$emit","confirm","mounted"],"sources":["/Users/fayzulla/Dev/kadastr/frontend/kadastr/src/components/ComponentSelectionModal.vue"],"sourcesContent":["<template>\n  <div class=\"modal-mask\">\n    <div class=\"modal-window\">\n      <OkModal\n        v-if=\"showError\"\n        v-bind:message=\"errorMessage\"\n        v-bind:header=\"errorHeader\"\n        v-on:confirm=\"hideErrorMessage\"\n      />\n      <div class=\"header\">{{ header }}</div>\n      <div class=\"message\">\n        <div class=\"form-group col-xs-3\">\n          <label style=\"float: left\"\n            >Полезные ископаемые доступные для месторождения</label\n          >\n          <select\n            class=\"form-select form-control-lg\"\n            v-model=\"selectedComponentId\"\n            aria-label=\"Полезные ископаемые доступные для месторождения\"\n          >\n            <option\n              v-for=\"c in components\"\n              v-bind:value=\"c.component_id\"\n              v-bind:key=\"c.component_id\"\n            >\n              {{ c.component_name }}\n            </option>\n          </select>\n        </div>\n      </div>\n      <button @click=\"confirm\" class=\"btn btn-dark btn-lg btn-block next\">\n        Далее\n      </button>\n      <button @click=\"cancel\" class=\"btn btn-dark btn-lg btn-block close\">\n        Отменить\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport OkModal from \"../components/OkModal.vue\";\n\nexport default {\n  name: \"ComponentSelectionModal\",\n  props: [\"deposit_id\", \"mine_area_id\"],\n  data() {\n    return {\n      components: [],\n      header: \"Выбор полезного ископаемого\",\n      selectedComponentId: null,\n      showError: false,\n      errorMessage:\n        \"Для данного месторождения отсутствуют записи по полезным ископаемым! Вам стоит выбрать полезное ископаемое или отменить действия мастера!\",\n      errorHeader: \"Нет данных по полезным ископаемым\",\n    };\n  },\n  methods: {\n    hideErrorMessage() {\n      this.getAllComponents();\n    },\n    getAllComponents() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      const url = this.$BASE_URL + \"/api/get_dictionary_contents/\";\n      axios\n        .post(\n          url,\n          { category: \"SPR_POL\", offset: 0, limit: 10000 },\n          { headers }\n        )\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            var result = response.data[0].result;\n            this.components = [];\n            for (var i = 0; i < result.length; i++) {\n              this.components.push({\n                deposit_id: this.deposit_id,\n                mine_area_id: this.mine_area_id,\n                component_id: result[i].id,\n                component_name: result[i].description,\n              });\n            }\n            this.showError = false;\n          }\n        });\n    },\n    getComponentsForDeposit() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      const url = this.$BASE_URL + \"/api/get_available_components_for_deposit/\";\n      axios\n        .post(\n          url,\n          { deposit_id: this.deposit_id, mine_area_id: this.mine_area_id },\n          { headers }\n        )\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            this.components = response.data[0].result;\n            if (this.components.length == 0) {\n              this.showError = true;\n            }\n          }\n        });\n    },\n    cancel() {\n      this.$emit(\"cancel\", {});\n    },\n    confirm() {\n      if (this.selectedComponentId == null) {\n        this.errorHeader = \"Ошибка при вводе данных\";\n        this.errorMessage = \"Не выбрано полезное ископаемое!\";\n        this.showError = true;\n      } else {\n        this.$emit(\"confirm\", {\n          deposit_id: this.deposit_id,\n          mine_area_id: this.mine_area_id,\n          component_id: this.selectedComponentId,\n        });\n      }\n    },\n  },\n  components: {\n    OkModal,\n  },\n  mounted() {\n    this.getAllComponents();\n  },\n};\n</script>\n\n<style scoped>\n.modal-mask {\n  position: fixed;\n  z-index: 1000094;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  transition: opacity 0.3s ease;\n}\n\n.modal-window {\n  border: rgb(169, 255, 202);\n  background-color: white;\n  position: fixed;\n  width: 400px;\n  height: 200px;\n  top: 50%;\n  left: 50%;\n  margin-top: -100px;\n  margin-left: -200px;\n  z-index: 1000095;\n}\n\n.header {\n  height: 30px;\n  width: 100%;\n  background-color: rgb(143, 150, 150);\n  text-align: center;\n  font-weight: bold;\n}\n\n.message {\n  font-weight: bolder;\n  color: black;\n  text-align: center;\n}\n\n.close {\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n}\n\n.next {\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}