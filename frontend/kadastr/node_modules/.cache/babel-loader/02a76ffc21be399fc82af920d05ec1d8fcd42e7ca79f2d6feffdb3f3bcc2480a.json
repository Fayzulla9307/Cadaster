{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-83a643a4\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"item\"\n};\nconst _hoisted_2 = [\"onUpdate:modelValue\"];\nconst _hoisted_3 = [\"onUpdate:modelValue\"];\nconst _hoisted_4 = {\n  style: {\n    \"width\": \"calc(100%)\"\n  }\n};\nconst _hoisted_5 = {\n  class: \"item\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  style: {\n    \"margin-left\": \"10px\",\n    \"margin-right\": \"10px\",\n    \"width\": \"150px\",\n    \"text-align\": \"right\",\n    \"font-weight\": \"bolder\"\n  }\n}, \"Год\", -1 /* HOISTED */));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  style: {\n    \"margin-left\": \"10px\",\n    \"margin-right\": \"10px\",\n    \"width\": \"150px\",\n    \"text-align\": \"right\",\n    \"font-weight\": \"bolder\"\n  }\n}, \"Стадии изученности\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  class: \"form-select form-control-md\",\n  \"aria-label\": \"Стадии изученности\",\n  style: {\n    \"width\": \"calc(100% - 640px)\"\n  },\n  placeholder: \"Введите степень освоения\"\n};\nconst _hoisted_9 = [\"value\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_OkModal = _resolveComponent(\"OkModal\");\n  const _component_BootstrapIcon = _resolveComponent(\"BootstrapIcon\");\n  return _openBlock(), _createElementBlock(\"div\", null, [$data.showError ? (_openBlock(), _createBlock(_component_OkModal, {\n    key: 0,\n    message: _ctx.errorMessage,\n    header: _ctx.header,\n    onConfirm: _ctx.hideErrorMessage\n  }, null, 8 /* PROPS */, [\"message\", \"header\", \"onConfirm\"])) : _createCommentVNode(\"v-if\", true), _ctx.showAuthError ? (_openBlock(), _createBlock(_component_OkModal, {\n    key: 1,\n    message: _ctx.authMessage,\n    header: _ctx.authHeader,\n    onConfirm: _ctx.hideAuthMessage\n  }, null, 8 /* PROPS */, [\"message\", \"header\", \"onConfirm\"])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" ConfirmModal\\n      v-if=\\\"showConfirmModal\\\"\\n      v-bind:message=\\\"confirmMessage\\\"\\n      v-bind:header=\\\"confirmHeader\\\"\\n      v-on:confirm=\\\"onConfirm\\\"\\n      v-on:cancel=\\\"onCancel\\\"\\n    / \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.items, item => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: item.deposit_id + '_' + item.mine_area_id + '_' + item.component_id + '_' + item.year\n    }, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"button\", {\n      onClick: _cache[0] || (_cache[0] = (...args) => _ctx.removeItem && _ctx.removeItem(...args)),\n      class: \"btn btn-dark btn-lg btn-block\",\n      style: {\n        \"float\": \"left\",\n        \"width\": \"70px\"\n      }\n    }, [_createVNode(_component_BootstrapIcon, {\n      icon: \"trash\"\n    })]), _withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      class: \"form-control form-control-lg\",\n      \"onUpdate:modelValue\": $event => item.year = $event,\n      placeholder: \"Введите год\"\n    }, null, 8 /* PROPS */, _hoisted_2), [[_vModelText, item.year]]), _withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      class: \"form-control form-control-lg\",\n      \"onUpdate:modelValue\": $event => item.exploration_stage = $event,\n      placeholder: \"Введите степень освоения\"\n    }, null, 8 /* PROPS */, _hoisted_3), [[_vModelText, item.exploration_stage]])])]);\n  }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => _ctx.addItem && _ctx.addItem(...args)),\n    class: \"btn btn-dark btn-lg btn-block\",\n    style: {\n      \"height\": \"50px\"\n    }\n  }, [_createCommentVNode(\" BootstrapIcon icon=\\\"check\\\" / \"), _createTextVNode(\" Добавить запись \")]), _hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control form-control-lg\",\n    style: {\n      \"width\": \"100px\"\n    },\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.newItemYear = $event),\n    placeholder: \"Год\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.newItemYear]]), _hoisted_7, _createElementVNode(\"select\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.stages, o => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      value: o.id,\n      key: o.id\n    }, _toDisplayString(o.description), 9 /* TEXT, PROPS */, _hoisted_9);\n  }), 128 /* KEYED_FRAGMENT */))])])])]);\n}","map":{"version":3,"names":["class","style","_createElementVNode","placeholder","_createElementBlock","$data","showError","_createBlock","_component_OkModal","message","_ctx","errorMessage","header","onConfirm","hideErrorMessage","showAuthError","authMessage","authHeader","hideAuthMessage","_createCommentVNode","_Fragment","_renderList","items","item","key","deposit_id","mine_area_id","component_id","year","_hoisted_1","onClick","_cache","args","removeItem","_createVNode","_component_BootstrapIcon","icon","type","$event","exploration_stage","_hoisted_4","_hoisted_5","addItem","_hoisted_6","newItemYear","_hoisted_7","_hoisted_8","stages","o","value","id","description","_hoisted_9"],"sources":["/Users/fayzulla/Dev/kadastr/frontend/kadastr/src/components/ExplorationCtrl.vue"],"sourcesContent":["<template>\n  <div>\n    <OkModal\n      v-if=\"showError\"\n      v-bind:message=\"errorMessage\"\n      v-bind:header=\"header\"\n      v-on:confirm=\"hideErrorMessage\"\n    />\n    <OkModal\n      v-if=\"showAuthError\"\n      v-bind:message=\"authMessage\"\n      v-bind:header=\"authHeader\"\n      v-on:confirm=\"hideAuthMessage\"\n    />\n    <!-- ConfirmModal\n      v-if=\"showConfirmModal\"\n      v-bind:message=\"confirmMessage\"\n      v-bind:header=\"confirmHeader\"\n      v-on:confirm=\"onConfirm\"\n      v-on:cancel=\"onCancel\"\n    / -->\n    <div\n      v-for=\"item in items\"\n      v-bind:key=\"\n        item.deposit_id +\n        '_' +\n        item.mine_area_id +\n        '_' +\n        item.component_id +\n        '_' +\n        item.year\n      \"\n    >\n      <div class=\"item\">\n        <button\n          @click=\"removeItem\"\n          class=\"btn btn-dark btn-lg btn-block\"\n          style=\"float: left; width: 70px\"\n        >\n          <BootstrapIcon icon=\"trash\" />\n        </button>\n        <input\n          type=\"text\"\n          class=\"form-control form-control-lg\"\n          v-model=\"item.year\"\n          placeholder=\"Введите год\"\n        />\n        <input\n          type=\"text\"\n          class=\"form-control form-control-lg\"\n          v-model=\"item.exploration_stage\"\n          placeholder=\"Введите степень освоения\"\n        />\n      </div>\n    </div>\n    <div style=\"width: calc(100%)\">\n      <div class=\"item\">\n        <button\n          @click=\"addItem\"\n          class=\"btn btn-dark btn-lg btn-block\"\n          style=\"height: 50px\"\n        >\n          <!-- BootstrapIcon icon=\"check\" / -->\n          Добавить запись\n        </button>\n        <label\n          style=\"\n            margin-left: 10px;\n            margin-right: 10px;\n            width: 150px;\n            text-align: right;\n            font-weight: bolder;\n          \"\n          >Год</label\n        >\n        <input\n          type=\"text\"\n          class=\"form-control form-control-lg\"\n          style=\"width: 100px\"\n          v-model=\"newItemYear\"\n          placeholder=\"Год\"\n        />\n        <label\n          style=\"\n            margin-left: 10px;\n            margin-right: 10px;\n            width: 150px;\n            text-align: right;\n            font-weight: bolder;\n          \"\n          >Стадии изученности</label\n        >\n        <select\n          class=\"form-select form-control-md\"\n          \n          aria-label=\"Стадии изученности\"\n          style=\"width: calc(100% - 640px)\"\n          placeholder=\"Введите степень освоения\"\n        >\n          <option v-for=\"o in stages\" v-bind:value=\"o.id\" v-bind:key=\"o.id\">\n            {{ o.description }}\n          </option>\n        </select>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport BootstrapIcon from \"@dvuckovic/vue3-bootstrap-icons\";\n//import ConfirmModal from \"../components/ConfirmModal.vue\";\nimport OkModal from \"./OkModal.vue\";\n\nexport default {\n  name: \"ExplorationCtrl\",\n  props: [\"deposit_id\", \"mine_area_id\", \"component_id\"],\n  data() {\n    return {\n      items: [],\n      year: null,\n      stages: [],\n      showSpinner: false,\n      showError: false,\n    };\n  },\n  methods: {\n    loadStages() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      const url = this.$BASE_URL + \"/api/get_dictionary_contents/\";\n      axios\n        .post(\n          url,\n          { category: \"SPR_STADII_IZUCHENNOSTI\", limit: 10000, offset: 0 },\n          { headers }\n        )\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            this.stages = response.data[0].result;\n          }\n        });\n    },\n  },\n  mounted() {\n    this.loadStages();\n  },\n  components: {\n    OkModal,\n    BootstrapIcon,\n  },\n};\n</script>\n\n<style scoped>\ninput,\nselect {\n  display: inline-block;\n  vertical-align: middle;\n  margin-left: 10px;\n  height: 30px;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}