{"ast":null,"code":"import axios from \"axios\";\nimport BootstrapIcon from \"@dvuckovic/vue3-bootstrap-icons\";\nimport Filter from \"../components/Filter.vue\";\nimport Paginator from \"../components/Paginator.vue\";\nexport default {\n  name: \"DepositTable\",\n  props: [],\n  data() {\n    return {\n      ipp: 10,\n      totalItems: 0,\n      page: 1,\n      filter: \"\",\n      items: []\n    };\n  },\n  methods: {\n    select(depositId, mineAreaId) {\n      this.$emit(\"confirm\", {\n        deposit_id: depositId,\n        mine_area_id: mineAreaId\n      });\n    },\n    confirm() {\n      this.$emit(\"confirm\", {\n        deposit_id: this.depositId,\n        mine_area_id: this.mineAreaId\n      });\n    },\n    cancel() {\n      this.$emit(\"cancel\", {});\n    },\n    countDeposits() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      };\n      const url = this.$BASE_URL + \"/api/get_deposits_incl_mine_areas_count/\";\n      axios.post(url, {\n        deposit_name: this.filter,\n        offset: 0,\n        limit: 10\n      }, {\n        headers\n      }).then(response => {\n        if (!response.data[0].auth_fail) {\n          this.totalItems = response.data[0].result;\n          this.loadDeposits();\n        }\n      });\n    },\n    loadDeposits() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      };\n      const url = this.$BASE_URL + \"/api/get_deposits_and_mine_areas/\";\n      const offset = (this.page - 1) * this.ipp;\n      axios.post(url, {\n        deposit_name: this.filter,\n        offset: offset,\n        limit: 10\n      }, {\n        headers\n      }).then(response => {\n        if (!response.data[0].auth_fail) {\n          this.items = JSON.parse(JSON.stringify(response.data[0].result));\n          for (var i = 0; i < this.items.length; i++) {\n            if (this.items[i].deposit_id == this.items[i].mine_area_id) {\n              this.items[i].description = this.items[i].deposit_name;\n            } else {\n              this.items[i].description = this.items[i].deposit_name + \", \" + this.items[i].mine_area_name;\n            }\n          }\n          this.$emit(\"loaded\");\n        }\n      });\n    },\n    changePage(o) {\n      this.page = o.page;\n      this.showSpinner = true;\n      this.loadDeposits();\n    },\n    filterTable(filter) {\n      this.page = 1;\n      this.filter = filter;\n      this.showSpinner = true;\n      this.countDeposits();\n    }\n  },\n  components: {\n    BootstrapIcon,\n    Paginator,\n    Filter\n  },\n  mounted() {\n    this.countDeposits();\n  }\n};","map":{"version":3,"names":["axios","BootstrapIcon","Filter","Paginator","name","props","data","ipp","totalItems","page","filter","items","methods","select","depositId","mineAreaId","$emit","deposit_id","mine_area_id","confirm","cancel","countDeposits","token","sessionStorage","getItem","headers","Authorization","url","$BASE_URL","post","deposit_name","offset","limit","then","response","auth_fail","result","loadDeposits","JSON","parse","stringify","i","length","description","mine_area_name","changePage","o","showSpinner","filterTable","components","mounted"],"sources":["/Users/fayzulla/Dev/kadastr/frontend/kadastr/src/components/DepositTable.vue"],"sourcesContent":["<template>\n  <div>\n    <Filter v-on:filter=\"filterTable\" v-bind:filterVal=\"filter\" />\n    <table style=\"border-style: none !important; width: 100%\">\n      <tr\n        style=\"border-style: none !important; width: 100%\"\n        v-for=\"item in items\"\n        v-bind:key=\"item.deposit_id + '_' + item.mine_area_id\"\n      >\n        <td style=\"border-style: none !important\">\n          <button\n            @click=\"select(item.deposit_id, item.mine_area_id)\"\n            class=\"btn btn-dark btn-lg btn-block\"\n          >\n            <BootstrapIcon icon=\"pencil\" />\n          </button>\n        </td>\n        <td style=\"width: 100%\">\n          <input\n            type=\"text\"\n            class=\"form-control form-control-lg\"\n            style=\"display: inline; width: calc(100\"\n            v-model=\"item.description\"\n            disabled\n          />\n        </td>\n      </tr>\n    </table>\n    <div class=\"separator\"></div>\n    <Paginator\n      v-bind:count=\"totalItems\"\n      v-bind:ipp=\"ipp\"\n      v-bind:currentPage=\"page\"\n      v-on:page-click=\"changePage\"\n      v-bind:autoMargin=\"true\"\n    />\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport BootstrapIcon from \"@dvuckovic/vue3-bootstrap-icons\";\n\nimport Filter from \"../components/Filter.vue\";\nimport Paginator from \"../components/Paginator.vue\";\n\nexport default {\n  name: \"DepositTable\",\n  props: [],\n  data() {\n    return {\n      ipp: 10,\n      totalItems: 0,\n      page: 1,\n      filter: \"\",\n      items: [],\n    };\n  },\n  methods: {\n    select(depositId, mineAreaId) {\n      this.$emit(\"confirm\", {\n        deposit_id: depositId,\n        mine_area_id: mineAreaId,\n      });\n    },\n    confirm() {\n      this.$emit(\"confirm\", {\n        deposit_id: this.depositId,\n        mine_area_id: this.mineAreaId,\n      });\n    },\n    cancel() {\n      this.$emit(\"cancel\", {});\n    },\n    countDeposits() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      const url = this.$BASE_URL + \"/api/get_deposits_incl_mine_areas_count/\";\n      axios\n        .post(\n          url,\n          { deposit_name: this.filter, offset: 0, limit: 10 },\n          { headers }\n        )\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            this.totalItems = response.data[0].result;\n            this.loadDeposits();\n          }\n        });\n    },\n    loadDeposits() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      const url = this.$BASE_URL + \"/api/get_deposits_and_mine_areas/\";\n      const offset = (this.page - 1) * this.ipp;\n      axios\n        .post(\n          url,\n          { deposit_name: this.filter, offset: offset, limit: 10 },\n          { headers }\n        )\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            this.items = JSON.parse(JSON.stringify(response.data[0].result));\n            for (var i = 0; i < this.items.length; i++) {\n              if (this.items[i].deposit_id == this.items[i].mine_area_id) {\n                this.items[i].description = this.items[i].deposit_name;\n              } else {\n                this.items[i].description =\n                  this.items[i].deposit_name +\n                  \", \" +\n                  this.items[i].mine_area_name;\n              }\n            }\n            this.$emit(\"loaded\");\n          }\n        });\n    },\n    changePage(o) {\n      this.page = o.page;\n      this.showSpinner = true;\n      this.loadDeposits();\n    },\n    filterTable(filter) {\n      this.page = 1;\n      this.filter = filter;\n      this.showSpinner = true;\n      this.countDeposits();\n    },\n  },\n  components: {\n    BootstrapIcon,\n    Paginator,\n    Filter,\n  },\n  mounted() {\n    this.countDeposits();\n  },\n};\n</script>\n\n<style scoped>\n.message {\n  font-weight: bolder;\n  color: black;\n  text-align: center;\n}\n\n.confirm {\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n}\n\n.cancel {\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n}\n\n.table {\n  margin: auto;\n  width: calc(100% - 20px);\n  height: calc(100% - 20px);\n  border-top: none !important;\n  border-bottom: none !important;\n}\n.separator {\n  padding: 10px;\n  margin-left: 10px;\n  border-top: none !important;\n  border-bottom: none !important;\n}\n\n.select {\n  float: left;\n}\n\n.deposit {\n  width: calc(100% - 50px);\n  float: left;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}