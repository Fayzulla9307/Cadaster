{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-7fac3963\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"item\"\n};\nconst _hoisted_2 = {\n  style: {\n    \"border-style\": \"none !important\",\n    \"width\": \"100%\"\n  }\n};\nconst _hoisted_3 = {\n  style: {\n    \"border-style\": \"none !important\",\n    \"width\": \"100%\"\n  }\n};\nconst _hoisted_4 = {\n  style: {\n    \"width\": \"50px\",\n    \"border-style\": \"none !important\"\n  }\n};\nconst _hoisted_5 = {\n  style: {\n    \"width\": \"50px\"\n  }\n};\nconst _hoisted_6 = {\n  style: {\n    \"width\": \"50px\"\n  }\n};\nconst _hoisted_7 = {\n  style: {\n    \"width\": \"100%\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ConfirmModal = _resolveComponent(\"ConfirmModal\");\n  const _component_EditMineAreaModal = _resolveComponent(\"EditMineAreaModal\");\n  const _component_OkModal = _resolveComponent(\"OkModal\");\n  const _component_ProtocolEditModal = _resolveComponent(\"ProtocolEditModal\");\n  const _component_ComponentSelectionModal = _resolveComponent(\"ComponentSelectionModal\");\n  const _component_BootstrapIcon = _resolveComponent(\"BootstrapIcon\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.showConfirmModal ? (_openBlock(), _createBlock(_component_ConfirmModal, {\n    key: 0,\n    message: $data.confirmMessage,\n    header: $data.confirmHeader,\n    onConfirm: $options.onConfirm,\n    onCancel: $options.onCancel\n  }, null, 8 /* PROPS */, [\"message\", \"header\", \"onConfirm\", \"onCancel\"])) : _createCommentVNode(\"v-if\", true), $data.showEditMineAreaModal ? (_openBlock(), _createBlock(_component_EditMineAreaModal, {\n    key: 1,\n    deposit_id: $data.depositId,\n    mine_area_id: $data.mineAreaId,\n    onSaveEditMineArea: $options.saveMineAreaEdit,\n    onCloseEditMineArea: $options.closeMineAreaEdit\n  }, null, 8 /* PROPS */, [\"deposit_id\", \"mine_area_id\", \"onSaveEditMineArea\", \"onCloseEditMineArea\"])) : _createCommentVNode(\"v-if\", true), $data.showAuthError ? (_openBlock(), _createBlock(_component_OkModal, {\n    key: 2,\n    message: $data.authMessage,\n    header: $data.authHeader,\n    onConfirm: $options.hideAuthMessage\n  }, null, 8 /* PROPS */, [\"message\", \"header\", \"onConfirm\"])) : _createCommentVNode(\"v-if\", true), $data.showProtocolEditModal ? (_openBlock(), _createBlock(_component_ProtocolEditModal, {\n    key: 3,\n    deposit_id: $props.deposit_id,\n    mine_area_id: $props.mine_area_id,\n    component_id: _ctx.component_id,\n    onReselect: $options.closeProtocolEditModal\n  }, null, 8 /* PROPS */, [\"deposit_id\", \"mine_area_id\", \"component_id\", \"onReselect\"])) : _createCommentVNode(\"v-if\", true), $data.showComponentSelectionModal ? (_openBlock(), _createBlock(_component_ComponentSelectionModal, {\n    key: 4,\n    deposit_id: $props.deposit_id,\n    mine_area_id: $props.mine_area_id,\n    onConfirm: $options.selectComponent,\n    onCancel: $options.closeAllWindows\n  }, null, 8 /* PROPS */, [\"deposit_id\", \"mine_area_id\", \"onConfirm\", \"onCancel\"])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"table\", _hoisted_2, [_createElementVNode(\"tr\", _hoisted_3, [_createElementVNode(\"td\", _hoisted_4, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.removeItem && $options.removeItem(...args)),\n    class: \"btn btn-dark btn-lg btn-block\",\n    style: {\n      \"float\": \"left\",\n      \"width\": \"200px\"\n    }\n  }, [_createVNode(_component_BootstrapIcon, {\n    icon: \"trash\"\n  }), _createTextVNode(\" Удалить \")])]), _createElementVNode(\"td\", _hoisted_5, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.editItem && $options.editItem(...args)),\n    class: \"btn btn-dark btn-lg btn-block\",\n    style: {\n      \"float\": \"left\",\n      \"width\": \"200px\"\n    }\n  }, [_createVNode(_component_BootstrapIcon, {\n    icon: \"pencil\"\n  }), _createTextVNode(\" Редактировать \")])]), _createElementVNode(\"td\", _hoisted_6, [_createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.openProtocolModal && $options.openProtocolModal(...args)),\n    class: \"btn btn-dark btn-lg btn-block\",\n    style: {\n      \"float\": \"left\",\n      \"width\": \"200px\"\n    }\n  }, [_createVNode(_component_BootstrapIcon, {\n    icon: \"file-word\"\n  }), _createTextVNode(\" Протокол \")])]), _createElementVNode(\"td\", _hoisted_7, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control form-control-lg\",\n    style: {\n      \"display\": \"inline\",\n      \"width\": \"calc(100%)\"\n    },\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.mineAreaName = $event),\n    disabled: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.mineAreaName]])])])])]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","$data","showConfirmModal","_createBlock","_component_ConfirmModal","message","confirmMessage","header","confirmHeader","onConfirm","$options","onCancel","showEditMineAreaModal","_component_EditMineAreaModal","deposit_id","depositId","mine_area_id","mineAreaId","onSaveEditMineArea","saveMineAreaEdit","onCloseEditMineArea","closeMineAreaEdit","showAuthError","_component_OkModal","authMessage","authHeader","hideAuthMessage","showProtocolEditModal","_component_ProtocolEditModal","$props","component_id","_ctx","onReselect","closeProtocolEditModal","showComponentSelectionModal","_component_ComponentSelectionModal","selectComponent","closeAllWindows","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","onClick","_cache","args","removeItem","_createVNode","_component_BootstrapIcon","icon","_hoisted_5","editItem","_hoisted_6","openProtocolModal","_hoisted_7","type","mineAreaName","$event","disabled"],"sources":["/Users/fayzulla/Dev/kadastr/frontend/kadastr/src/components/MineAreaItem.vue"],"sourcesContent":["<template>\n  <div class=\"item\">\n    <ConfirmModal\n      v-if=\"showConfirmModal\"\n      v-bind:message=\"confirmMessage\"\n      v-bind:header=\"confirmHeader\"\n      v-on:confirm=\"onConfirm\"\n      v-on:cancel=\"onCancel\"\n    />\n    <EditMineAreaModal\n      v-bind:deposit_id=\"depositId\"\n      v-bind:mine_area_id=\"mineAreaId\"\n      v-on:save-edit-mine-area=\"saveMineAreaEdit\"\n      v-on:close-edit-mine-area=\"closeMineAreaEdit\"\n      v-if=\"showEditMineAreaModal\"\n    />\n    <OkModal\n      v-if=\"showAuthError\"\n      v-bind:message=\"authMessage\"\n      v-bind:header=\"authHeader\"\n      v-on:confirm=\"hideAuthMessage\"\n    />\n    <ProtocolEditModal\n      v-bind:deposit_id=\"deposit_id\"\n      v-bind:mine_area_id=\"mine_area_id\"\n      v-bind:component_id=\"component_id\"\n      v-if=\"showProtocolEditModal\"\n      v-on:reselect=\"closeProtocolEditModal\"\n    />\n    <ComponentSelectionModal\n      v-if=\"showComponentSelectionModal\"\n      v-bind:deposit_id=\"deposit_id\"\n      v-bind:mine_area_id=\"mine_area_id\"\n      v-on:confirm=\"selectComponent\"\n      v-on:cancel=\"closeAllWindows\"\n    />\n    <table style=\"border-style: none !important; width: 100%\">\n      <tr style=\"border-style: none !important; width: 100%\">\n        <td style=\"width: 50px; border-style: none !important\">\n          <button\n            @click=\"removeItem\"\n            class=\"btn btn-dark btn-lg btn-block\"\n            style=\"float: left; width: 200px\"\n          >\n            <BootstrapIcon icon=\"trash\" />\n            Удалить\n          </button>\n        </td>\n        <td style=\"width: 50px\">\n          <button\n            @click=\"editItem\"\n            class=\"btn btn-dark btn-lg btn-block\"\n            style=\"float: left; width: 200px\"\n          >\n            <BootstrapIcon icon=\"pencil\" />\n            Редактировать\n          </button>\n        </td>\n        <td style=\"width: 50px\">\n          <button\n            @click=\"openProtocolModal\"\n            class=\"btn btn-dark btn-lg btn-block\"\n            style=\"float: left; width: 200px\"\n          >\n            <BootstrapIcon icon=\"file-word\" />\n            Протокол\n          </button>\n        </td>\n        <td style=\"width: 100%\">\n          <input\n            type=\"text\"\n            class=\"form-control form-control-lg\"\n            style=\"display: inline; width: calc(100%)\"\n            v-model=\"mineAreaName\"\n            disabled\n          />\n        </td>\n      </tr>\n    </table>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nimport BootstrapIcon from \"@dvuckovic/vue3-bootstrap-icons\";\nimport EditMineAreaModal from \"../components/EditMineAreaModal.vue\";\nimport ConfirmModal from \"../components/ConfirmModal.vue\";\nimport OkModal from \"./OkModal.vue\";\nimport ProtocolEditModal from \"../components/ProtocolEditModal.vue\";\nimport ComponentSelectionModal from \"../components/ComponentSelectionModal.vue\";\n\nexport default {\n  name: \"MineAreaItem\",\n  props: [\"deposit_id\", \"mine_area_id\", \"mine_area_name\"],\n  data() {\n    return {\n      depositId: this.deposit_id,\n      mineAreaId: this.mine_area_id,\n      mineAreaName: this.mine_area_name,\n      showEditMineAreaModal: false,\n      showEditReserves: false,\n      confirmMessage: \"\",\n      confirmHeader: \"\",\n      showConfirmModal: false,\n      showAuthError: false,\n      authMessage: \"Доступ запрещен\",\n      authHeader: \"Ошибка безопасности\",\n      showComponentSelectionModal: false,\n      showProtocolEditModal: false,\n    };\n  },\n  methods: {\n    closeProtocolEditModal() {\n      this.showProtocolEditModal = false;\n    },\n    selectComponent(data) {\n      this.showComponentSelectionModal = false;\n      this.component_id = data.component_id;\n      this.showProtocolEditModal = true;\n    },\n    closeAllWindows() {\n      this.showComponentSelectionModal = false;\n    },\n    openProtocolModal() {\n      this.showComponentSelectionModal = true;\n    },\n    hideAuthMessage() {\n      this.showAuthError = false;\n    },\n    onConfirm() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      const url = this.$BASE_URL + \"/api/delete_mine_area/\";\n      axios\n        .post(\n          url,\n          { deposit_id: this.depositId, mine_area_id: this.mine_area_id },\n          { headers }\n        )\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            this.$emit(\"mine-area-deleted\", {});\n          } else {\n            this.showAuthError = true;\n          }\n        });\n    },\n    onCancel() {\n      this.showConfirmModal = false;\n    },\n    removeItem(e) {\n      this.confirmMessage =\n        \"Удалить участок? Это приведет к потере данных (лицензий, запасов, а также всех движений и исторических данных!)\";\n      this.confirmHeader = \"Удаление данных!\";\n      this.showConfirmModal = true;\n      e.preventDefault();\n    },\n    editItem(e) {\n      this.showEditMineAreaModal = true;\n      /*this.$emit('mine-area-edited', {\n          \"deposit_id\": this.depositId,\n          \"mine_area_id\": this.mineAreaId\n        });\n      */\n      e.preventDefault();\n    },\n    editReserves(e) {\n      //this.$emit('reserves-edited-for-deposit', {\"deposit_id\": this.depositId});\n      this.showEditReserves = true;\n      e.preventDefault();\n    },\n    closeEditReserves() {\n      this.showEditReserves = false;\n      //e.preventDefault();\n    },\n    closeMineAreaEdit() {\n      this.showEditMineAreaModal = false;\n    },\n    saveMineAreaEdit(mineArea) {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      const url = this.$BASE_URL + \"/api/update_mine_area/\";\n      axios.post(url, mineArea, { headers }).then(() => {\n        this.$emit(\"mine-area-edited\");\n      });\n      this.showEditMineAreaModal = false;\n    },\n  },\n  components: {\n    EditMineAreaModal,\n    BootstrapIcon,\n    ConfirmModal,\n    OkModal,\n    ProtocolEditModal,\n    ComponentSelectionModal,\n  },\n  mounted() {},\n};\n</script>\n\n<style scoped>\nimg {\n  height: 30px;\n  width: 30px;\n}\n\n.item {\n  width: calc(100%);\n  height: 50px;\n  font-weight: bolder;\n  font-family: \"Gill Sans\", \"Gill Sans MT\", Calibri, \"Trebuchet MS\", sans-serif;\n  border-style: none !important;\n}\n.delete-btn {\n  height: 30px;\n  display: inline;\n  /*margin-right: 5px;*/\n}\n.save-btn {\n  height: 30px;\n  display: inline-block;\n  /*margin-right: 5px;*/\n}\n.inputfield {\n  display: inline;\n  height: 30px;\n  width: 330px;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}