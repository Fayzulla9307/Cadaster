{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '@/assets/micromine.png';\nconst _withScopeId = n => (_pushScopeId(\"data-v-7ba5bd90\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"title\"\n}, [/*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"Micromine\",\n  width: \"150\",\n  id: \"logo_top\"\n}), /*#__PURE__*/_createElementVNode(\"span\", {\n  id: \"caption-text\"\n}, \"Система ведения кадастровой инфомации\")], -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"menu_container\"\n};\nconst _hoisted_5 = {\n  class: \"menu\"\n};\nconst _hoisted_6 = {\n  id: \"nav\"\n};\nconst _hoisted_7 = {\n  key: 1\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"Micromine\",\n  width: \"150\",\n  id: \"logo\"\n}, null, -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_router_view = _resolveComponent(\"router-view\");\n  const _component_Login = _resolveComponent(\"Login\");\n  return $data.loaded ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.isAuthenticated ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createCommentVNode(\" MainWindow / \"), _createVNode(_component_router_link, {\n    to: \"/dicts\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Общие справочники\")]),\n    _: 1 /* STABLE */\n  }), _createTextVNode(\" | \"), _createVNode(_component_router_link, {\n    to: \"/districts\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Справочники районов\")]),\n    _: 1 /* STABLE */\n  }), _createTextVNode(\" | \"), _createVNode(_component_router_link, {\n    to: \"/deposits\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Месторождения\")]),\n    _: 1 /* STABLE */\n  }), _createTextVNode(\" | \"), _createCommentVNode(\" router-link to=\\\"/transfer\\\">Мастер переноса</router-link> | \"), _createCommentVNode(\" router-link to=\\\"/protocols\\\">Протоколы</router-link> | \"), _createVNode(_component_router_link, {\n    to: \"/reports\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Отчеты\")]),\n    _: 1 /* STABLE */\n  }), _createTextVNode(\" | \"), _createVNode(_component_router_link, {\n    to: \"/security\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Безопасность\")]),\n    _: 1 /* STABLE */\n  }), _createTextVNode(\" | \"), _createVNode(_component_router_link, {\n    to: \"/about\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"О программе\")]),\n    _: 1 /* STABLE */\n  }), _createTextVNode(\" | \"), _createCommentVNode(\" router-link to=\\\"/configuration\\\">Настройки</router-link> | \"), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.logout())\n  }, \"Выход\")])])]), _createVNode(_component_router_view)])) : _createCommentVNode(\"v-if\", true), !$data.isAuthenticated ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createVNode(_component_Login), _hoisted_8])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"names":["_imports_0","_createElementVNode","class","src","alt","width","id","$data","loaded","_createElementBlock","_hoisted_1","isAuthenticated","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_createCommentVNode","_createVNode","_component_router_link","to","href","onClick","_cache","$event","$options","logout","_component_router_view","_hoisted_7","_component_Login","_hoisted_8"],"sources":["/Users/fayzulla/Dev/kadastr/frontend/kadastr/src/App.vue"],"sourcesContent":["<template>\n  <div v-if=\"loaded\">\n    <div v-if=\"isAuthenticated\">\n      <div class=\"title\">\n        <img src=\"@/assets/micromine.png\" alt=\"Micromine\" width=\"150\" id=\"logo_top\" />\n        <span id=\"caption-text\">Система ведения кадастровой инфомации</span>\n      </div>\n      <div class=\"menu_container\">\n        <div class=\"menu\">\n          <div id=\"nav\">\n            <!-- MainWindow / -->\n            <router-link to=\"/dicts\">Общие справочники</router-link> |\n            <router-link to=\"/districts\">Справочники районов</router-link> |\n            <router-link to=\"/deposits\">Месторождения</router-link> |\n            <!-- router-link to=\"/transfer\">Мастер переноса</router-link> | -->\n            <!-- router-link to=\"/protocols\">Протоколы</router-link> | -->\n            <router-link to=\"/reports\">Отчеты</router-link> |\n            <router-link to=\"/security\">Безопасность</router-link> |\n            <router-link to=\"/about\">О программе</router-link> |\n            <!-- router-link to=\"/configuration\">Настройки</router-link> | -->\n            <a href=\"#\" @click=\"logout()\">Выход</a>\n          </div>\n        </div>\n      </div>\n      <router-view></router-view>\n    </div>\n    <div v-if=\"!isAuthenticated\">\n      <Login />\n      <img src=\"@/assets/micromine.png\" alt=\"Micromine\" width=\"150\" id=\"logo\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Login from \"@/views/Login.vue\";\n\nexport default {\n  name: \"App\",\n  data() {\n    return {\n      isAuthenticated: false,\n      loaded: false,\n    };\n  },\n  methods: {\n    checkAuth() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      const url = this.$BASE_URL + \"/auth/validate_token/\";\n      console.log(url);\n      axios.post(url, {}, { headers }).then((response) => {\n        this.loaded = true;\n        if (response.data[0].valid) {\n          this.isAuthenticated = true;\n          //this.$router.push(\"/main/\");\n        } else {\n          this.isAuthenticated = false;\n        }\n      });\n    },\n    logout() {\n      sessionStorage.setItem(\"token\", null);\n      this.isAuthenticated = false;\n      this.$router.push(\"/\");\n    },\n    pollAuthData() {\n      this.polling = setInterval(() => {\n        this.checkAuth();\n      }, 60000);\n    },\n  },\n  mounted() {\n    this.checkAuth();\n    this.pollAuthData();\n    this.$router.push(\"/\");\n  },\n  components: {\n    Login,\n  },\n};\n</script>\n\n<style scoped>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  width: 100%;\n}\n\n#nav {\n  padding: 25px 30px;\n  margin: 0 auto;\n}\n\n#nav a {\n  font-weight: bold;\n  color: #ffffff;\n  font-family: \"Dazzed\", sans-serif;\n  text-decoration: none;\n  margin: 0 2px;\n}\n\n#nav a.router-link-exact-active {\n  color: #42b983;\n}\n\n#logo {\n  position: absolute;\n  bottom: 20px;\n  margin-left: 20px;\n}\n\n#logo_top {\n  position: absolute;\n  display: block;\n  margin-left: 3.4%;\n}\n\n.title {\n  width: 100%;\n  text-align: center;\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  font-weight: bold;\n}\n</style>\n"],"mappings":";OAIaA,UAA4B;;;;;;;;gEADnCC,mBAAA,CAGM;EAHDC,KAAK,EAAC;AAAO,I,aAChBD,mBAAA,CAA8E;EAAzEE,GAA4B,EAA5BH,UAA4B;EAACI,GAAG,EAAC,WAAW;EAACC,KAAK,EAAC,KAAK;EAACC,EAAE,EAAC;iBACjEL,mBAAA,CAAoE;EAA9DK,EAAE,EAAC;AAAc,GAAC,uCAAqC,E;;EAE1DJ,KAAK,EAAC;AAAgB;;EACpBA,KAAK,EAAC;AAAM;;EACVI,EAAE,EAAC;AAAK;;;;gEAmBjBL,mBAAA,CAA0E;EAArEE,GAA4B,EAxB1BH,UAA4B;EAwBDI,GAAG,EAAC,WAAW;EAACC,KAAK,EAAC,KAAK;EAACC,EAAE,EAAC;;;;;;;SA3B1DC,KAAA,CAAAC,MAAM,I,cAAjBC,mBAAA,CA6BM,OAAAC,UAAA,GA5BOH,KAAA,CAAAI,eAAe,I,cAA1BF,mBAAA,CAuBM,OAAAG,UAAA,GAtBJC,UAGM,EACNZ,mBAAA,CAgBM,OAhBNa,UAgBM,GAfJb,mBAAA,CAcM,OAdNc,UAcM,GAbJd,mBAAA,CAYM,OAZNe,UAYM,GAXJC,mBAAA,kBAAqB,EACrBC,YAAA,CAAwDC,sBAAA;IAA3CC,EAAE,EAAC;EAAQ;sBAAC,MAAiB,C,iBAAjB,mBAAiB,E;;uBAAc,KACxD,GAAAF,YAAA,CAA8DC,sBAAA;IAAjDC,EAAE,EAAC;EAAY;sBAAC,MAAmB,C,iBAAnB,qBAAmB,E;;uBAAc,KAC9D,GAAAF,YAAA,CAAuDC,sBAAA;IAA1CC,EAAE,EAAC;EAAW;sBAAC,MAAa,C,iBAAb,eAAa,E;;uBAAc,KACvD,GAAAH,mBAAA,kEAAmE,EACnEA,mBAAA,6DAA8D,EAC9DC,YAAA,CAA+CC,sBAAA;IAAlCC,EAAE,EAAC;EAAU;sBAAC,MAAM,C,iBAAN,QAAM,E;;uBAAc,KAC/C,GAAAF,YAAA,CAAsDC,sBAAA;IAAzCC,EAAE,EAAC;EAAW;sBAAC,MAAY,C,iBAAZ,cAAY,E;;uBAAc,KACtD,GAAAF,YAAA,CAAkDC,sBAAA;IAArCC,EAAE,EAAC;EAAQ;sBAAC,MAAW,C,iBAAX,aAAW,E;;uBAAc,KAClD,GAAAH,mBAAA,iEAAkE,EAClEhB,mBAAA,CAAuC;IAApCoB,IAAI,EAAC,GAAG;IAAEC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,MAAM;KAAI,OAAK,E,OAIzCR,YAAA,CAA2BS,sBAAA,E,yCAEjBpB,KAAA,CAAAI,eAAe,I,cAA3BF,mBAAA,CAGM,OAAAmB,UAAA,GAFJV,YAAA,CAASW,gBAAA,GACTC,UAA0E,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}