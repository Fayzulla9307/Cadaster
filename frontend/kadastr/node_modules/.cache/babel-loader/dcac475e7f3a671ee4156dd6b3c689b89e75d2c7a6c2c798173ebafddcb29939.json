{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, vModelCheckbox as _vModelCheckbox, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-ed200612\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"modal-mask\"\n};\nconst _hoisted_2 = {\n  class: \"modal-window\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"header\"\n}, \"Редактирование существующего пользователя\", -1));\nconst _hoisted_4 = {\n  class: \"body\"\n};\nconst _hoisted_5 = {\n  class: \"login-form\"\n};\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Имя пользователя\", -1));\nconst _hoisted_8 = {\n  class: \"form-group\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Роль\", -1));\nconst _hoisted_10 = [\"value\"];\nconst _hoisted_11 = {\n  class: \"form-group col-xs-3\"\n};\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Не менять пароль\", -1));\nconst _hoisted_13 = {\n  class: \"form-group\"\n};\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Пароль\", -1));\nconst _hoisted_15 = [\"disabled\"];\nconst _hoisted_16 = {\n  class: \"form-group\"\n};\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Описание пользователя\", -1));\nconst _hoisted_18 = {\n  class: \"form-group\",\n  style: {\n    \"margin-top\": \"10px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"form\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control form-control-lg\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.username = $event)\n  }, null, 512), [[_vModelText, $data.username]])]), _createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _withDirectives(_createElementVNode(\"select\", {\n    class: \"form-select\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.selectedRoleId = $event),\n    \"aria-label\": \"Роль\"\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.roles, role => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      value: role.role_id,\n      key: role.role_id\n    }, _toDisplayString(role.role), 9, _hoisted_10);\n  }), 128))], 512), [[_vModelSelect, $data.selectedRoleId]])]), _createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _withDirectives(_createElementVNode(\"input\", {\n    class: \"form-check-input\",\n    type: \"checkbox\",\n    value: \"\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.doNotChangePassword = $event)\n  }, null, 512), [[_vModelCheckbox, $data.doNotChangePassword]])]), _createElementVNode(\"div\", _hoisted_13, [_hoisted_14, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    class: \"form-control form-control-lg\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.password = $event),\n    disabled: $data.doNotChangePassword == true\n  }, null, 8, _hoisted_15), [[_vModelText, $data.password]])]), _createElementVNode(\"div\", _hoisted_16, [_hoisted_17, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control form-control-lg\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.description = $event)\n  }, null, 512), [[_vModelText, $data.description]])]), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"button\", {\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.save && $options.save(...args)),\n    class: \"btn btn-dark btn-lg btn-block save\"\n  }, \" Сохранить \"), _createElementVNode(\"button\", {\n    onClick: _cache[6] || (_cache[6] = (...args) => $options.cancel && $options.cancel(...args)),\n    class: \"btn btn-dark btn-lg btn-block close\"\n  }, \" Отменить \")])])])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","style","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","type","$data","username","$event","_hoisted_8","_hoisted_9","selectedRoleId","_Fragment","_renderList","roles","role","value","role_id","key","_hoisted_10","_hoisted_11","_hoisted_12","doNotChangePassword","_hoisted_13","_hoisted_14","password","disabled","_hoisted_16","_hoisted_17","description","_hoisted_18","onClick","_cache","args","$options","save","cancel"],"sources":["/Users/fayzulla/Dev/kadastr/frontend/kadastr/src/components/EditUserModal.vue"],"sourcesContent":["<template>\n  <div class=\"modal-mask\">\n    <div class=\"modal-window\">\n      <div class=\"header\">Редактирование существующего пользователя</div>\n      <div class=\"body\">\n        <form class=\"login-form\">\n          <div class=\"form-group\">\n            <label>Имя пользователя</label>\n            <input\n              type=\"text\"\n              class=\"form-control form-control-lg\"\n              v-model=\"username\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <label>Роль</label>\n            <select\n              class=\"form-select\"\n              v-model=\"selectedRoleId\"\n              aria-label=\"Роль\"\n            >\n              <option\n                v-for=\"role in roles\"\n                v-bind:value=\"role.role_id\"\n                v-bind:key=\"role.role_id\"\n              >\n                {{ role.role }}\n              </option>\n            </select>\n          </div>\n          <div class=\"form-group col-xs-3\">\n            <label>Не менять пароль</label>\n            <input\n              class=\"form-check-input\"\n              type=\"checkbox\"\n              value=\"\"\n              v-model=\"doNotChangePassword\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <label>Пароль</label>\n            <input\n              type=\"password\"\n              class=\"form-control form-control-lg\"\n              v-model=\"password\"\n              :disabled=\"doNotChangePassword == true\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <label>Описание пользователя</label>\n            <input\n              type=\"text\"\n              class=\"form-control form-control-lg\"\n              v-model=\"description\"\n            />\n          </div>\n          <div class=\"form-group\" style=\"margin-top: 10px\">\n            <button @click=\"save\" class=\"btn btn-dark btn-lg btn-block save\">\n              Сохранить\n            </button>\n            <button @click=\"cancel\" class=\"btn btn-dark btn-lg btn-block close\">\n              Отменить\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"EditUserModal\",\n  props: [\"user_id\"],\n  data() {\n    return {\n      roles: [],\n      failed: false,\n      username: null,\n      password: null,\n      description: null,\n      role: null,\n      selectedRoleId: null,\n      doNotChangePassword: true,\n    };\n  },\n  methods: {\n    save(e) {\n      this.$emit(\"save\", {\n        user_id: this.user_id,\n        username: this.username,\n        description: this.description,\n        role_id: this.selectedRoleId,\n        password: this.password,\n        change_password: !this.doNotChangePassword,\n      });\n      e.preventDefault();\n    },\n    cancel(e) {\n      this.$emit(\"cancel\", {});\n      e.preventDefault();\n    },\n    getUser() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      var url = this.$BASE_URL + \"/api/get_user/\";\n      axios\n        .post(url, { user_id: this.user_id }, { headers })\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            console.log(JSON.stringify(response.data[0].result));\n            this.selectedRoleId = response.data[0].result.role_id;\n            this.role = response.data[0].result.role;\n            this.password = \"SECRET\";\n            this.description = response.data[0].result.description;\n            this.username = response.data[0].result.username;\n          }\n        });\n    },\n    getRoles() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      var url = this.$BASE_URL + \"/api/get_roles/\";\n      axios\n        .post(url, { user_id: this.user_id }, { headers })\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            this.roles = response.data[0].result;\n            this.getUser();\n          }\n        });\n    },\n  },\n  mounted() {\n    this.getRoles();\n  },\n};\n</script>\n\n<style scoped>\n.modal-mask {\n  position: fixed;\n  z-index: 9998;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  transition: opacity 0.3s ease;\n}\n\n.modal-window {\n  border: rgb(169, 255, 202);\n  background-color: white;\n  position: fixed;\n  width: 500px;\n  height: 500px;\n  top: 50%;\n  left: 50%;\n  margin-top: -250px;\n  margin-left: -250px;\n  z-index: 100;\n}\n\n.header {\n  height: 30px;\n  width: 100%;\n  background-color: rgb(143, 150, 150);\n  text-align: center;\n  font-weight: bold;\n}\n\n.body {\n  font-weight: bolder;\n  color: black;\n  text-align: center;\n}\n\n.close {\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n}\n\n.save {\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}