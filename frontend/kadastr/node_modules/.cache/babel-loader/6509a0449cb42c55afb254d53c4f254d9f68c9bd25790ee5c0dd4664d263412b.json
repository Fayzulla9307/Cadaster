{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createVNode as _createVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-26084dc2\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"login-div\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \" Система ведения государственного геологического кадастра Республики Узбекистан \", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"login-form\"\n};\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Учетная запись\", -1 /* HOISTED */));\nconst _hoisted_6 = {\n  class: \"input-group input-group-lg\"\n};\nconst _hoisted_7 = {\n  class: \"input-group-addon\"\n};\nconst _hoisted_8 = {\n  class: \"input-group-text\"\n};\nconst _hoisted_9 = {\n  class: \"form-group\"\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Пароль\", -1 /* HOISTED */));\nconst _hoisted_11 = {\n  class: \"input-group input-group-lg\"\n};\nconst _hoisted_12 = {\n  class: \"input-group-append\"\n};\nconst _hoisted_13 = {\n  class: \"input-group-text\"\n};\nconst _hoisted_14 = {\n  class: \"form-group\",\n  style: {\n    \"margin-top\": \"10px\"\n  }\n};\nconst _hoisted_15 = {\n  key: 0,\n  class: \"form-group\",\n  style: {\n    \"margin-top\": \"10px\"\n  }\n};\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"alert alert-danger\",\n  role: \"alert\"\n}, \" Неверный логин или пароль \", -1 /* HOISTED */));\nconst _hoisted_17 = [_hoisted_16];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_OkModal = _resolveComponent(\"OkModal\");\n  const _component_BootstrapIcon = _resolveComponent(\"BootstrapIcon\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.showDsModal ? (_openBlock(), _createBlock(_component_OkModal, {\n    key: 0,\n    header: $data.dsOffer,\n    message: $data.dsNotImplMsg,\n    onConfirm: $options.closeDsModal\n  }, null, 8 /* PROPS */, [\"header\", \"message\", \"onConfirm\"])) : _createCommentVNode(\"v-if\", true), _hoisted_2, _createElementVNode(\"form\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"span\", _hoisted_8, [_createVNode(_component_BootstrapIcon, {\n    icon: \"person\",\n    size: \"2x\"\n  })])]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"username\",\n    class: \"form-control form-control-lg\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.username = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.username]])])]), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"span\", _hoisted_13, [_createVNode(_component_BootstrapIcon, {\n    icon: \"lock\",\n    size: \"2x\"\n  })])]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    class: \"form-control form-control-lg\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.password]])])]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.login && $options.login(...args)),\n    class: \"btn btn-dark btn-lg btn-block\"\n  }, [_createVNode(_component_BootstrapIcon, {\n    icon: \"arrow-right-square\",\n    size: \"1x\"\n  }), _createTextVNode(\" Войти \")]), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.dslogin && $options.dslogin(...args)),\n    class: \"btn btn-dark btn-lg btn-block\",\n    style: {\n      \"float\": \"right\"\n    }\n  }, [_createVNode(_component_BootstrapIcon, {\n    icon: \"key\",\n    size: \"1x\"\n  }), _createTextVNode(\" Войти с цифровым ключом \")])]), $data.failed ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, _hoisted_17)) : _createCommentVNode(\"v-if\", true)]), _createTextVNode(\" Мы поддерживаем RSA ключи Tokey®JCOP3 от CrypToken \")]);\n}","map":{"version":3,"names":["class","_createElementVNode","style","role","_hoisted_16","_createElementBlock","_hoisted_1","$data","showDsModal","_createBlock","_component_OkModal","header","dsOffer","message","dsNotImplMsg","onConfirm","$options","closeDsModal","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_createVNode","_component_BootstrapIcon","icon","size","type","username","$event","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","password","_hoisted_14","onClick","_cache","args","login","dslogin","failed","_hoisted_15","_hoisted_17"],"sources":["/Users/fayzulla/Dev/kadastr/frontend/kadastr/src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-div\">\n    <OkModal\n      v-bind:header=\"dsOffer\"\n      v-bind:message=\"dsNotImplMsg\"\n      v-if=\"showDsModal\"\n      v-on:confirm=\"closeDsModal\"\n    />\n    <h3>\n      Система ведения государственного геологического кадастра Республики\n      Узбекистан\n    </h3>\n    <form class=\"login-form\">\n      <div class=\"form-group\">\n        <label>Учетная запись</label>\n        <div class=\"input-group input-group-lg\">\n          <div class=\"input-group-addon\">\n            <span class=\"input-group-text\">\n              <BootstrapIcon icon=\"person\" size=\"2x\" />\n            </span>\n          </div>\n          <input\n            type=\"username\"\n            class=\"form-control form-control-lg\"\n            v-model=\"username\"\n          />\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <label>Пароль</label>\n        <div class=\"input-group input-group-lg\">\n          <div class=\"input-group-append\">\n            <span class=\"input-group-text\">\n              <BootstrapIcon icon=\"lock\" size=\"2x\" />\n            </span>\n          </div>\n          <input\n            type=\"password\"\n            class=\"form-control form-control-lg\"\n            v-model=\"password\"\n          />\n        </div>\n      </div>\n      <div class=\"form-group\" style=\"margin-top: 10px\">\n        <button @click=\"login\" class=\"btn btn-dark btn-lg btn-block\">\n          <BootstrapIcon icon=\"arrow-right-square\" size=\"1x\" />\n          Войти\n        </button>\n        <button\n          @click=\"dslogin\"\n          class=\"btn btn-dark btn-lg btn-block\"\n          style=\"float: right\"\n        >\n          <BootstrapIcon icon=\"key\" size=\"1x\" />\n          Войти с цифровым ключом\n        </button>\n      </div>\n      <div class=\"form-group\" v-if=\"failed\" style=\"margin-top: 10px\">\n        <div class=\"alert alert-danger\" role=\"alert\">\n          Неверный логин или пароль\n        </div>\n      </div>\n    </form>\n    Мы поддерживаем RSA ключи Tokey®JCOP3 от CrypToken\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport OkModal from \"../components/OkModal.vue\";\nimport BootstrapIcon from \"@dvuckovic/vue3-bootstrap-icons\";\n\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      failed: false,\n      dsOffer: \"Использование лицензионного ключа для входа\",\n      dsNotImplMsg: \"Обратитесь к производителю ПО для консультации\",\n      showDsModal: false,\n    };\n  },\n  methods: {\n    login(e) {\n      const data = { username: this.username, password: this.password };\n      const headers = {\n        \"Content-Type\": \"application/json\",\n      };\n      axios\n        .post(this.$BASE_URL + \"/auth/signin/\", data, { headers })\n        .then((response) => {\n          if (response.data[0].success) {\n            sessionStorage.setItem(\"token\", response.data[0].token);\n            this.$parent.isAuthenticated = true;\n            this.$router.push(\"/deposits/\");\n          }\n          this.failed = !response.data[0].success;\n        });\n      e.preventDefault();\n    },\n    dslogin(e) {\n      this.showDsModal = true;\n      e.preventDefault();\n    },\n    closeDsModal() {\n      this.showDsModal = false;\n    },\n  },\n  components: {\n    OkModal,\n    BootstrapIcon,\n  },\n};\n</script>\n\n<style scoped>\nh3 {\n  color: black;\n  text-align: center;\n}\n\n.login-div {\n  position: absolute;\n\n  width: 450px;\n  height: 300px;\n\n  /* Center form on page horizontally & vertically */\n  top: 50%;\n  left: 50%;\n  margin-top: -150px;\n  margin-left: -225px;\n}\n\n.login-form {\n  width: 450px;\n  height: 300px;\n\n  background: white;\n  border-radius: 10px;\n\n  margin: 0;\n  padding: 0;\n}\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAW;gEAOpBC,mBAAA,CAGK,YAHD,kFAGJ;;EACMD,KAAK,EAAC;AAAY;;EACjBA,KAAK,EAAC;AAAY;gEACrBC,mBAAA,CAA6B,eAAtB,gBAAc;;EAChBD,KAAK,EAAC;AAA4B;;EAChCA,KAAK,EAAC;AAAmB;;EACtBA,KAAK,EAAC;AAAkB;;EAW/BA,KAAK,EAAC;AAAY;iEACrBC,mBAAA,CAAqB,eAAd,QAAM;;EACRD,KAAK,EAAC;AAA4B;;EAChCA,KAAK,EAAC;AAAoB;;EACvBA,KAAK,EAAC;AAAkB;;EAW/BA,KAAK,EAAC,YAAY;EAACE,KAAwB,EAAxB;IAAA;EAAA;;;;EAcnBF,KAAK,EAAC,YAAY;EAAeE,KAAwB,EAAxB;IAAA;EAAA;;iEACpCD,mBAAA,CAEM;EAFDD,KAAK,EAAC,oBAAoB;EAACG,IAAI,EAAC;GAAQ,6BAE7C;qBAFAC,WAEM,C;;;;uBA3DZC,mBAAA,CA+DM,OA/DNC,UA+DM,GA3DIC,KAAA,CAAAC,WAAW,I,cAHnBC,YAAA,CAKEC,kBAAA;;IAJOC,MAAM,EAAEJ,KAAA,CAAAK,OAAO;IACfC,OAAO,EAAEN,KAAA,CAAAO,YAAY;IAEvBC,SAAO,EAAEC,QAAA,CAAAC;oGAEhBC,UAGK,EACLjB,mBAAA,CAkDO,QAlDPkB,UAkDO,GAjDLlB,mBAAA,CAcM,OAdNmB,UAcM,GAbJC,UAA6B,EAC7BpB,mBAAA,CAWM,OAXNqB,UAWM,GAVJrB,mBAAA,CAIM,OAJNsB,UAIM,GAHJtB,mBAAA,CAEO,QAFPuB,UAEO,GADLC,YAAA,CAAyCC,wBAAA;IAA1BC,IAAI,EAAC,QAAQ;IAACC,IAAI,EAAC;0BAGtC3B,mBAAA,CAIE;IAHA4B,IAAI,EAAC,UAAU;IACf7B,KAAK,EAAC,8BAA8B;+DAC3BO,KAAA,CAAAuB,QAAQ,GAAAC,MAAA;iDAARxB,KAAA,CAAAuB,QAAQ,E,OAIvB7B,mBAAA,CAcM,OAdN+B,UAcM,GAbJC,WAAqB,EACrBhC,mBAAA,CAWM,OAXNiC,WAWM,GAVJjC,mBAAA,CAIM,OAJNkC,WAIM,GAHJlC,mBAAA,CAEO,QAFPmC,WAEO,GADLX,YAAA,CAAuCC,wBAAA;IAAxBC,IAAI,EAAC,MAAM;IAACC,IAAI,EAAC;0BAGpC3B,mBAAA,CAIE;IAHA4B,IAAI,EAAC,UAAU;IACf7B,KAAK,EAAC,8BAA8B;+DAC3BO,KAAA,CAAA8B,QAAQ,GAAAN,MAAA;iDAARxB,KAAA,CAAA8B,QAAQ,E,OAIvBpC,mBAAA,CAaM,OAbNqC,WAaM,GAZJrC,mBAAA,CAGS;IAHAsC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEzB,QAAA,CAAA0B,KAAA,IAAA1B,QAAA,CAAA0B,KAAA,IAAAD,IAAA,CAAK;IAAEzC,KAAK,EAAC;MAC3ByB,YAAA,CAAqDC,wBAAA;IAAtCC,IAAI,EAAC,oBAAoB;IAACC,IAAI,EAAC;uBAAO,SAEvD,E,GACA3B,mBAAA,CAOS;IANNsC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEzB,QAAA,CAAA2B,OAAA,IAAA3B,QAAA,CAAA2B,OAAA,IAAAF,IAAA,CAAO;IACfzC,KAAK,EAAC,+BAA+B;IACrCE,KAAoB,EAApB;MAAA;IAAA;MAEAuB,YAAA,CAAsCC,wBAAA;IAAvBC,IAAI,EAAC,KAAK;IAACC,IAAI,EAAC;uBAAO,2BAExC,E,KAE4BrB,KAAA,CAAAqC,MAAM,I,cAApCvC,mBAAA,CAIM,OAJNwC,WAIM,EAAAC,WAAA,K,sDACD,sDAET,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}