{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-234b1cfb\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  style: {\n    \"border-style\": \"none !important\",\n    \"width\": \"100%\"\n  }\n};\nconst _hoisted_2 = {\n  style: {\n    \"border-style\": \"none !important\"\n  }\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = {\n  style: {\n    \"width\": \"100%\"\n  }\n};\nconst _hoisted_5 = [\"onUpdate:modelValue\"];\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"separator\"\n}, null, -1));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Filter = _resolveComponent(\"Filter\");\n  const _component_BootstrapIcon = _resolveComponent(\"BootstrapIcon\");\n  const _component_Paginator = _resolveComponent(\"Paginator\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_Filter, {\n    onFilter: $options.filterTable,\n    filterVal: $data.filter\n  }, null, 8, [\"onFilter\", \"filterVal\"]), _createElementVNode(\"table\", _hoisted_1, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.items, item => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      style: {\n        \"border-style\": \"none !important\",\n        \"width\": \"100%\"\n      },\n      key: item.deposit_id + '_' + item.mine_area_id\n    }, [_createElementVNode(\"td\", _hoisted_2, [_createElementVNode(\"button\", {\n      onClick: $event => $options.select(item.deposit_id, item.mine_area_id),\n      class: \"btn btn-dark btn-lg btn-block\"\n    }, [_createVNode(_component_BootstrapIcon, {\n      icon: \"pencil\"\n    })], 8, _hoisted_3)]), _createElementVNode(\"td\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      class: \"form-control form-control-lg\",\n      style: {\n        \"display\": \"inline\",\n        \"width\": \"calc(100\"\n      },\n      \"onUpdate:modelValue\": $event => item.description = $event,\n      disabled: \"\"\n    }, null, 8, _hoisted_5), [[_vModelText, item.description]])])]);\n  }), 128))]), _hoisted_6, _createVNode(_component_Paginator, {\n    count: $data.totalItems,\n    ipp: $data.ipp,\n    currentPage: $data.page,\n    onPageClick: $options.changePage,\n    autoMargin: true\n  }, null, 8, [\"count\", \"ipp\", \"currentPage\", \"onPageClick\"])]);\n}","map":{"version":3,"names":["style","_createElementVNode","class","_createElementBlock","_createVNode","_component_Filter","onFilter","$options","filterTable","filterVal","$data","filter","_hoisted_1","_Fragment","_renderList","items","item","key","deposit_id","mine_area_id","_hoisted_2","onClick","$event","select","_component_BootstrapIcon","icon","_hoisted_4","type","description","disabled","_hoisted_6","_component_Paginator","count","totalItems","ipp","currentPage","page","onPageClick","changePage","autoMargin"],"sources":["/Users/fayzulla/Dev/kadastr/frontend/kadastr/src/components/DepositTable.vue"],"sourcesContent":["<template>\n  <div>\n    <Filter v-on:filter=\"filterTable\" v-bind:filterVal=\"filter\" />\n    <table style=\"border-style: none !important; width: 100%\">\n      <tr\n        style=\"border-style: none !important; width: 100%\"\n        v-for=\"item in items\"\n        v-bind:key=\"item.deposit_id + '_' + item.mine_area_id\"\n      >\n        <td style=\"border-style: none !important\">\n          <button\n            @click=\"select(item.deposit_id, item.mine_area_id)\"\n            class=\"btn btn-dark btn-lg btn-block\"\n          >\n            <BootstrapIcon icon=\"pencil\" />\n          </button>\n        </td>\n        <td style=\"width: 100%\">\n          <input\n            type=\"text\"\n            class=\"form-control form-control-lg\"\n            style=\"display: inline; width: calc(100\"\n            v-model=\"item.description\"\n            disabled\n          />\n        </td>\n      </tr>\n    </table>\n    <div class=\"separator\"></div>\n    <Paginator\n      v-bind:count=\"totalItems\"\n      v-bind:ipp=\"ipp\"\n      v-bind:currentPage=\"page\"\n      v-on:page-click=\"changePage\"\n      v-bind:autoMargin=\"true\"\n    />\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport BootstrapIcon from \"@dvuckovic/vue3-bootstrap-icons\";\n\nimport Filter from \"../components/Filter.vue\";\nimport Paginator from \"../components/Paginator.vue\";\n\nexport default {\n  name: \"DepositTable\",\n  props: [],\n  data() {\n    return {\n      ipp: 10,\n      totalItems: 0,\n      page: 1,\n      filter: \"\",\n      items: [],\n    };\n  },\n  methods: {\n    select(depositId, mineAreaId) {\n      this.$emit(\"confirm\", {\n        deposit_id: depositId,\n        mine_area_id: mineAreaId,\n      });\n    },\n    confirm() {\n      this.$emit(\"confirm\", {\n        deposit_id: this.depositId,\n        mine_area_id: this.mineAreaId,\n      });\n    },\n    cancel() {\n      this.$emit(\"cancel\", {});\n    },\n    countDeposits() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      const url = this.$BASE_URL + \"/api/get_deposits_incl_mine_areas_count/\";\n      axios\n        .post(\n          url,\n          { deposit_name: this.filter, offset: 0, limit: 10 },\n          { headers }\n        )\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            this.totalItems = response.data[0].result;\n            this.loadDeposits();\n          }\n        });\n    },\n    loadDeposits() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      const url = this.$BASE_URL + \"/api/get_deposits_and_mine_areas/\";\n      const offset = (this.page - 1) * this.ipp;\n      axios\n        .post(\n          url,\n          { deposit_name: this.filter, offset: offset, limit: 10 },\n          { headers }\n        )\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            this.items = JSON.parse(JSON.stringify(response.data[0].result));\n            for (var i = 0; i < this.items.length; i++) {\n              if (this.items[i].deposit_id == this.items[i].mine_area_id) {\n                this.items[i].description = this.items[i].deposit_name;\n              } else {\n                this.items[i].description =\n                  this.items[i].deposit_name +\n                  \", \" +\n                  this.items[i].mine_area_name;\n              }\n            }\n            this.$emit(\"loaded\");\n          }\n        });\n    },\n    changePage(o) {\n      this.page = o.page;\n      this.showSpinner = true;\n      this.loadDeposits();\n    },\n    filterTable(filter) {\n      this.page = 1;\n      this.filter = filter;\n      this.showSpinner = true;\n      this.countDeposits();\n    },\n  },\n  components: {\n    BootstrapIcon,\n    Paginator,\n    Filter,\n  },\n  mounted() {\n    this.countDeposits();\n  },\n};\n</script>\n\n<style scoped>\n.message {\n  font-weight: bolder;\n  color: black;\n  text-align: center;\n}\n\n.confirm {\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n}\n\n.cancel {\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n}\n\n.table {\n  margin: auto;\n  width: calc(100% - 20px);\n  height: calc(100% - 20px);\n  border-top: none !important;\n  border-bottom: none !important;\n}\n.separator {\n  padding: 10px;\n  margin-left: 10px;\n  border-top: none !important;\n  border-bottom: none !important;\n}\n\n.select {\n  float: left;\n}\n\n.deposit {\n  width: calc(100% - 50px);\n  float: left;\n}\n</style>\n"],"mappings":";;;EAGWA,KAAkD,EAAlD;IAAA;IAAA;EAAA;AAAkD;;EAMjDA,KAAqC,EAArC;IAAA;EAAA;AAAqC;;;EAQrCA,KAAmB,EAAnB;IAAA;EAAA;AAAmB;;gEAW3BC,mBAAA,CAA6B;EAAxBC,KAAK,EAAC;AAAW;;;;;uBA3BxBC,mBAAA,CAmCM,cAlCJC,YAAA,CAA8DC,iBAAA;IAAjDC,QAAM,EAAEC,QAAA,CAAAC,WAAW;IAASC,SAAS,EAAEC,KAAA,CAAAC;0CACpDV,mBAAA,CAwBQ,SAxBRW,UAwBQ,I,kBAvBNT,mBAAA,CAsBKU,SAAA,QAAAC,WAAA,CApBYJ,KAAA,CAAAK,KAAK,EAAbC,IAAI;yBAFbb,mBAAA,CAsBK;MArBHH,KAAkD,EAAlD;QAAA;QAAA;MAAA,CAAkD;MAE3CiB,GAAG,EAAED,IAAI,CAACE,UAAU,SAASF,IAAI,CAACG;QAEzClB,mBAAA,CAOK,MAPLmB,UAOK,GANHnB,mBAAA,CAKS;MAJNoB,OAAK,EAAAC,MAAA,IAAEf,QAAA,CAAAgB,MAAM,CAACP,IAAI,CAACE,UAAU,EAAEF,IAAI,CAACG,YAAY;MACjDjB,KAAK,EAAC;QAENE,YAAA,CAA+BoB,wBAAA;MAAhBC,IAAI,EAAC;IAAQ,G,oBAGhCxB,mBAAA,CAQK,MARLyB,UAQK,G,gBAPHzB,mBAAA,CAME;MALA0B,IAAI,EAAC,MAAM;MACXzB,KAAK,EAAC,8BAA8B;MACpCF,KAAwC,EAAxC;QAAA;QAAA;MAAA,CAAwC;uCAC/BgB,IAAI,CAACY,WAAW,GAAAN,MAAA;MACzBO,QAAQ,EAAR;4CADSb,IAAI,CAACY,WAAW,E;eAMjCE,UAA6B,EAC7B1B,YAAA,CAME2B,oBAAA;IALOC,KAAK,EAAEtB,KAAA,CAAAuB,UAAU;IACjBC,GAAG,EAAExB,KAAA,CAAAwB,GAAG;IACRC,WAAW,EAAEzB,KAAA,CAAA0B,IAAI;IACnBC,WAAU,EAAE9B,QAAA,CAAA+B,UAAU;IACpBC,UAAU,EAAE"},"metadata":{},"sourceType":"module","externalDependencies":[]}