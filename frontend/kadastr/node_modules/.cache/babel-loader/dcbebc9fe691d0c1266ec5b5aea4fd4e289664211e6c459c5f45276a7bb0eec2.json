{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-de1ea386\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"security\"\n};\nconst _hoisted_2 = {\n  key: 4,\n  class: \"disclaimer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ConfirmModal = _resolveComponent(\"ConfirmModal\");\n  const _component_OkModal = _resolveComponent(\"OkModal\");\n  const _component_Spinner = _resolveComponent(\"Spinner\");\n  const _component_UsersTable = _resolveComponent(\"UsersTable\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.showConfirmModal ? (_openBlock(), _createBlock(_component_ConfirmModal, {\n    key: 0,\n    message: _ctx.confirmMessage,\n    header: _ctx.confirmHeader,\n    onConfirm: _ctx.onConfirm,\n    onCancel: _ctx.onCancel\n  }, null, 8 /* PROPS */, [\"message\", \"header\", \"onConfirm\", \"onCancel\"])) : _createCommentVNode(\"v-if\", true), $data.showError ? (_openBlock(), _createBlock(_component_OkModal, {\n    key: 1,\n    message: $data.errorMessage,\n    header: $data.header,\n    onConfirm: _ctx.hideErrorMessage\n  }, null, 8 /* PROPS */, [\"message\", \"header\", \"onConfirm\"])) : _createCommentVNode(\"v-if\", true), $data.showSpinner ? (_openBlock(), _createBlock(_component_Spinner, {\n    key: 2\n  })) : _createCommentVNode(\"v-if\", true), $data.hasPermissions ? (_openBlock(), _createBlock(_component_UsersTable, {\n    key: 3\n  })) : _createCommentVNode(\"v-if\", true), !$data.hasPermissions ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \" Добро пожаловать в конфигурацию системы безопасности. Здесь вы сможете добавить пользователей, удалить пользователей, назначить пользователей в группы, задать пароль для пользователя. Данный функционал доступен только для администраторов системы! \")) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","$data","showConfirmModal","_createBlock","_component_ConfirmModal","message","_ctx","confirmMessage","header","confirmHeader","onConfirm","onCancel","showError","_component_OkModal","errorMessage","hideErrorMessage","showSpinner","_component_Spinner","key","hasPermissions","_component_UsersTable","_hoisted_2"],"sources":["/Users/fayzulla/Dev/kadastr/frontend/kadastr/src/views/SecuritySettings.vue"],"sourcesContent":["<template>\n  <div class=\"security\">\n    <ConfirmModal\n      v-if=\"showConfirmModal\"\n      v-bind:message=\"confirmMessage\"\n      v-bind:header=\"confirmHeader\"\n      v-on:confirm=\"onConfirm\"\n      v-on:cancel=\"onCancel\"\n    />\n    <OkModal\n      v-if=\"showError\"\n      v-bind:message=\"errorMessage\"\n      v-bind:header=\"header\"\n      v-on:confirm=\"hideErrorMessage\"\n    />\n    <Spinner v-if=\"showSpinner\" />\n    <UsersTable v-if=\"hasPermissions\" />\n    <div class=\"disclaimer\" v-if=\"!hasPermissions\">\n      Добро пожаловать в конфигурацию системы безопасности. Здесь вы сможете\n      добавить пользователей, удалить пользователей, назначить пользователей в\n      группы, задать пароль для пользователя. Данный функционал доступен только\n      для администраторов системы!\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport OkModal from \"../components/OkModal.vue\";\nimport ConfirmModal from \"../components/ConfirmModal.vue\";\nimport Spinner from \"../components/Spinner.vue\";\nimport UsersTable from \"../components/UsersTable.vue\";\n\nexport default {\n  name: \"SecuritySettings\",\n  props: [],\n  data() {\n    return {\n      showError: false,\n      header: \"Сохранение данных\",\n      errorMessage: \"\",\n      failed: false,\n      showSpinner: false,\n      showConfirmModal: false,\n      hasPermissions: false,\n      roles: [],\n    };\n  },\n  methods: {\n    has_permissions() {\n      const data = {};\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      axios\n        .post(\n          this.$BASE_URL + \"/api/has_permissions_to_security_settings/\",\n          data,\n          { headers }\n        )\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            this.hasPermissions = true;\n          }\n        });\n    },\n  },\n  components: {\n    Spinner,\n    OkModal,\n    ConfirmModal,\n    UsersTable,\n  },\n  mounted() {\n    this.has_permissions();\n  },\n};\n</script>\n\n<style scoped>\n.modal-mask {\n  position: fixed;\n  z-index: 100009;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  transition: opacity 0.3s ease;\n}\n\n.modal-window {\n  border: rgb(169, 255, 202);\n  background-color: white;\n  position: fixed;\n  width: 400px;\n  height: 400px;\n  top: 50%;\n  left: 50%;\n  margin-top: -100px;\n  margin-left: -200px;\n  z-index: 1000092;\n}\n\n.header {\n  height: 30px;\n  width: 100%;\n  background-color: rgb(143, 150, 150);\n  text-align: center;\n  font-weight: bold;\n}\n\n.message {\n  font-weight: bolder;\n  color: black;\n  text-align: center;\n}\n\n.close {\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n}\n\n.excel {\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n}\n\n.html {\n  position: absolute;\n  bottom: 10px;\n  left: 30px;\n}\n\ntd {\n  margin-left: 100px !important;\n}\n\ntable {\n  border-spacing: 20px !important;\n}\n\n.disclaimer {\n  position: absolute;\n  top: 50%;\n  left: calc(50% - 300px);\n  width: 600px;\n  margin: auto;\n}\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAU;;;EAgBdA,KAAK,EAAC;;;;;;;uBAhBbC,mBAAA,CAsBM,OAtBNC,UAsBM,GApBIC,KAAA,CAAAC,gBAAgB,I,cADxBC,YAAA,CAMEC,uBAAA;;IAJOC,OAAO,EAAEC,IAAA,CAAAC,cAAc;IACvBC,MAAM,EAAEF,IAAA,CAAAG,aAAa;IACvBC,SAAO,EAAEJ,IAAA,CAAAI,SAAS;IAClBC,QAAM,EAAEL,IAAA,CAAAK;gHAGPV,KAAA,CAAAW,SAAS,I,cADjBT,YAAA,CAKEU,kBAAA;;IAHOR,OAAO,EAAEJ,KAAA,CAAAa,YAAY;IACrBN,MAAM,EAAEP,KAAA,CAAAO,MAAM;IAChBE,SAAO,EAAEJ,IAAA,CAAAS;oGAEDd,KAAA,CAAAe,WAAW,I,cAA1Bb,YAAA,CAA8Bc,kBAAA;IAAAC,GAAA;EAAA,M,mCACZjB,KAAA,CAAAkB,cAAc,I,cAAhChB,YAAA,CAAoCiB,qBAAA;IAAAF,GAAA;EAAA,M,oCACLjB,KAAA,CAAAkB,cAAc,I,cAA7CpB,mBAAA,CAKM,OALNsB,UAKM,EALyC,0PAK/C,K"},"metadata":{},"sourceType":"module","externalDependencies":[]}