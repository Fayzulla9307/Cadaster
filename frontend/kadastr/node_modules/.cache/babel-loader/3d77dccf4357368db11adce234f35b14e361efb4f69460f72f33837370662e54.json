{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"EditUserModal\",\n  props: [\"user_id\"],\n  data() {\n    return {\n      roles: [],\n      failed: false,\n      username: null,\n      password: null,\n      description: null,\n      role: null,\n      selectedRoleId: null,\n      doNotChangePassword: true\n    };\n  },\n  methods: {\n    save(e) {\n      this.$emit(\"save\", {\n        user_id: this.user_id,\n        username: this.username,\n        description: this.description,\n        role_id: this.selectedRoleId,\n        password: this.password,\n        change_password: !this.doNotChangePassword\n      });\n      e.preventDefault();\n    },\n    cancel(e) {\n      this.$emit(\"cancel\", {});\n      e.preventDefault();\n    },\n    getUser() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      };\n      var url = this.$BASE_URL + \"/api/get_user/\";\n      axios.post(url, {\n        user_id: this.user_id\n      }, {\n        headers\n      }).then(response => {\n        if (!response.data[0].auth_fail) {\n          console.log(JSON.stringify(response.data[0].result));\n          this.selectedRoleId = response.data[0].result.role_id;\n          this.role = response.data[0].result.role;\n          this.password = \"SECRET\";\n          this.description = response.data[0].result.description;\n          this.username = response.data[0].result.username;\n        }\n      });\n    },\n    getRoles() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      };\n      var url = this.$BASE_URL + \"/api/get_roles/\";\n      axios.post(url, {\n        user_id: this.user_id\n      }, {\n        headers\n      }).then(response => {\n        if (!response.data[0].auth_fail) {\n          this.roles = response.data[0].result;\n          this.getUser();\n        }\n      });\n    }\n  },\n  mounted() {\n    this.getRoles();\n  }\n};","map":{"version":3,"names":["axios","name","props","data","roles","failed","username","password","description","role","selectedRoleId","doNotChangePassword","methods","save","e","$emit","user_id","role_id","change_password","preventDefault","cancel","getUser","token","sessionStorage","getItem","headers","Authorization","url","$BASE_URL","post","then","response","auth_fail","console","log","JSON","stringify","result","getRoles","mounted"],"sources":["/Users/fayzulla/Dev/kadastr/frontend/kadastr/src/components/EditUserModal.vue"],"sourcesContent":["<template>\n  <div class=\"modal-mask\">\n    <div class=\"modal-window\">\n      <div class=\"header\">Редактирование существующего пользователя</div>\n      <div class=\"body\">\n        <form class=\"login-form\">\n          <div class=\"form-group\">\n            <label>Имя пользователя</label>\n            <input\n              type=\"text\"\n              class=\"form-control form-control-lg\"\n              v-model=\"username\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <label>Роль</label>\n            <select\n              class=\"form-select\"\n              v-model=\"selectedRoleId\"\n              aria-label=\"Роль\"\n            >\n              <option\n                v-for=\"role in roles\"\n                v-bind:value=\"role.role_id\"\n                v-bind:key=\"role.role_id\"\n              >\n                {{ role.role }}\n              </option>\n            </select>\n          </div>\n          <div class=\"form-group col-xs-3\">\n            <label>Не менять пароль</label>\n            <input\n              class=\"form-check-input\"\n              type=\"checkbox\"\n              value=\"\"\n              v-model=\"doNotChangePassword\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <label>Пароль</label>\n            <input\n              type=\"password\"\n              class=\"form-control form-control-lg\"\n              v-model=\"password\"\n              :disabled=\"doNotChangePassword == true\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <label>Описание пользователя</label>\n            <input\n              type=\"text\"\n              class=\"form-control form-control-lg\"\n              v-model=\"description\"\n            />\n          </div>\n          <div class=\"form-group\" style=\"margin-top: 10px\">\n            <button @click=\"save\" class=\"btn btn-dark btn-lg btn-block save\">\n              Сохранить\n            </button>\n            <button @click=\"cancel\" class=\"btn btn-dark btn-lg btn-block close\">\n              Отменить\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"EditUserModal\",\n  props: [\"user_id\"],\n  data() {\n    return {\n      roles: [],\n      failed: false,\n      username: null,\n      password: null,\n      description: null,\n      role: null,\n      selectedRoleId: null,\n      doNotChangePassword: true,\n    };\n  },\n  methods: {\n    save(e) {\n      this.$emit(\"save\", {\n        user_id: this.user_id,\n        username: this.username,\n        description: this.description,\n        role_id: this.selectedRoleId,\n        password: this.password,\n        change_password: !this.doNotChangePassword,\n      });\n      e.preventDefault();\n    },\n    cancel(e) {\n      this.$emit(\"cancel\", {});\n      e.preventDefault();\n    },\n    getUser() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      var url = this.$BASE_URL + \"/api/get_user/\";\n      axios\n        .post(url, { user_id: this.user_id }, { headers })\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            console.log(JSON.stringify(response.data[0].result));\n            this.selectedRoleId = response.data[0].result.role_id;\n            this.role = response.data[0].result.role;\n            this.password = \"SECRET\";\n            this.description = response.data[0].result.description;\n            this.username = response.data[0].result.username;\n          }\n        });\n    },\n    getRoles() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      var url = this.$BASE_URL + \"/api/get_roles/\";\n      axios\n        .post(url, { user_id: this.user_id }, { headers })\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            this.roles = response.data[0].result;\n            this.getUser();\n          }\n        });\n    },\n  },\n  mounted() {\n    this.getRoles();\n  },\n};\n</script>\n\n<style scoped>\n.modal-mask {\n  position: fixed;\n  z-index: 9998;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  transition: opacity 0.3s ease;\n}\n\n.modal-window {\n  border: rgb(169, 255, 202);\n  background-color: white;\n  position: fixed;\n  width: 500px;\n  height: 500px;\n  top: 50%;\n  left: 50%;\n  margin-top: -250px;\n  margin-left: -250px;\n  z-index: 100;\n}\n\n.header {\n  height: 30px;\n  width: 100%;\n  background-color: rgb(143, 150, 150);\n  text-align: center;\n  font-weight: bold;\n}\n\n.body {\n  font-weight: bolder;\n  color: black;\n  text-align: center;\n}\n\n.close {\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n}\n\n.save {\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}