{"ast":null,"code":"import axios from \"axios\";\nimport DistrictItem from \"../components/DistrictItem.vue\";\nimport DistrictNewItem from \"../components/DistrictNewItem.vue\";\nimport Paginator from \"../components/Paginator.vue\";\nimport Filter from \"../components/Filter.vue\";\nimport Spinner from \"../components/Spinner.vue\";\nexport default {\n  name: \"DistrictTable\",\n  props: [\"id_area\"],\n  watch: {\n    id_area: {\n      deep: true,\n      handler(n) {\n        this.page = 1;\n        this.showSpinner = true;\n        this.areaIdLocal = n;\n        console.log(this.areaIdLocal);\n        this.countItems();\n        //this.loadItems();\n      }\n    }\n  },\n\n  data() {\n    return {\n      items: [],\n      areaIdLocal: this.id_area,\n      totalItems: 0,\n      page: 1,\n      ipp: 10,\n      filter: \"\",\n      loadedItems: 0,\n      showSpinner: true\n    };\n  },\n  methods: {\n    countItems() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      };\n      var url = this.$BASE_URL + \"/api/get_district_count/\";\n      axios.post(url, {\n        area_id: this.areaIdLocal,\n        district_name: this.filter\n      }, {\n        headers\n      }).then(response => {\n        if (!response.data[0].auth_fail) {\n          this.totalItems = response.data[0].result;\n          console.log(this.totalItems);\n          this.loadItems();\n        }\n      });\n    },\n    loadItems() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      };\n      var url = this.$BASE_URL + \"/api/get_districts/\";\n      const offset = (this.page - 1) * this.ipp;\n      console.log({\n        id_area: this.areaIdLocal,\n        district_name: this.filter,\n        offset: offset,\n        limit: this.ipp\n      });\n      axios.post(url, {\n        id_area: this.areaIdLocal,\n        district_name: this.filter,\n        offset: offset,\n        limit: this.ipp\n      }, {\n        headers\n      }).then(response => {\n        if (!response.data[0].auth_fail) {\n          this.items = response.data[0].result;\n          this.loadedItems = 0;\n          this.showSpinner = false;\n        }\n      });\n    },\n    changePage(o) {\n      this.page = o.page;\n      this.countItems();\n      //this.loadItems();\n    },\n\n    added() {\n      this.page = 1;\n      this.filter = \"\";\n      this.countItems();\n    },\n    updated() {\n      this.filter = \"\";\n      this.countItems();\n      //this.loadItems();\n    },\n\n    filterTable(filter) {\n      this.page = 1;\n      this.filter = filter;\n      this.countItems();\n      //this.loadItems();\n    }\n  },\n\n  components: {\n    DistrictItem,\n    DistrictNewItem,\n    Paginator,\n    Filter,\n    Spinner\n  },\n  mounted() {\n    this.page = 1;\n    this.countItems();\n    //this.loadItems();\n  }\n};","map":{"version":3,"names":["axios","DistrictItem","DistrictNewItem","Paginator","Filter","Spinner","name","props","watch","id_area","deep","handler","n","page","showSpinner","areaIdLocal","console","log","countItems","data","items","totalItems","ipp","filter","loadedItems","methods","token","sessionStorage","getItem","headers","Authorization","url","$BASE_URL","post","area_id","district_name","then","response","auth_fail","result","loadItems","offset","limit","changePage","o","added","updated","filterTable","components","mounted"],"sources":["/Users/fayzulla/Dev/kadastr/frontend/kadastr/src/components/DistrictTable.vue"],"sourcesContent":["<template>\n  <div class=\"table\">\n    <Spinner v-if=\"showSpinner\" />\n    <Filter v-on:filter=\"filterTable\" v-bind:filterVal=\"filter\" />\n    <DistrictItem\n      v-for=\"item in items\"\n      v-bind:key=\"item.id_district + '_' + item.id_area\"\n      v-bind:id=\"item.id_district + '_' + item.id_area\"\n      v-bind:displayButtons=\"true\"\n      v-bind:id_republic=\"1\"\n      v-bind:id_area=\"item.id_area\"\n      v-bind:id_district=\"item.id_district\"\n      v-bind:district_name=\"item.district_name\"\n      v-on:district-updated=\"updated\"\n    />\n    <DistrictNewItem\n      v-bind:id_area=\"areaIdLocal\"\n      v-on:district-updated=\"added\"\n    />\n    <Paginator\n      v-bind:count=\"totalItems\"\n      v-bind:ipp=\"ipp\"\n      v-bind:currentPage=\"page\"\n      v-on:page-click=\"changePage\"\n    />\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport DistrictItem from \"../components/DistrictItem.vue\";\nimport DistrictNewItem from \"../components/DistrictNewItem.vue\";\nimport Paginator from \"../components/Paginator.vue\";\nimport Filter from \"../components/Filter.vue\";\nimport Spinner from \"../components/Spinner.vue\";\n\nexport default {\n  name: \"DistrictTable\",\n  props: [\"id_area\"],\n  watch: {\n    id_area: {\n      deep: true,\n      handler(n) {\n        this.page = 1;\n        this.showSpinner = true;\n        this.areaIdLocal = n;\n        console.log(this.areaIdLocal);\n        this.countItems();\n        //this.loadItems();\n      },\n    },\n  },\n  data() {\n    return {\n      items: [],\n      areaIdLocal: this.id_area,\n      totalItems: 0,\n      page: 1,\n      ipp: 10,\n      filter: \"\",\n      loadedItems: 0,\n      showSpinner: true,\n    };\n  },\n  methods: {\n    countItems() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      var url = this.$BASE_URL + \"/api/get_district_count/\";\n      axios\n        .post(\n          url,\n          { area_id: this.areaIdLocal, district_name: this.filter },\n          { headers }\n        )\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            this.totalItems = response.data[0].result;\n            console.log(this.totalItems);\n            this.loadItems();\n          }\n        });\n    },\n    loadItems() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      var url = this.$BASE_URL + \"/api/get_districts/\";\n      const offset = (this.page - 1) * this.ipp;\n      console.log({\n        id_area: this.areaIdLocal,\n        district_name: this.filter,\n        offset: offset,\n        limit: this.ipp,\n      });\n      axios\n        .post(\n          url,\n          {\n            id_area: this.areaIdLocal,\n            district_name: this.filter,\n            offset: offset,\n            limit: this.ipp,\n          },\n          { headers }\n        )\n        .then((response) => {\n          if (!response.data[0].auth_fail) {\n            this.items = response.data[0].result;\n            this.loadedItems = 0;\n            this.showSpinner = false;\n          }\n        });\n    },\n    changePage(o) {\n      this.page = o.page;\n      this.countItems();\n      //this.loadItems();\n    },\n    added() {\n      this.page = 1;\n      this.filter = \"\";\n      this.countItems();\n    },\n    updated() {\n      this.filter = \"\";\n      this.countItems();\n      //this.loadItems();\n    },\n    filterTable(filter) {\n      this.page = 1;\n      this.filter = filter;\n      this.countItems();\n      //this.loadItems();\n    },\n  },\n  components: {\n    DistrictItem,\n    DistrictNewItem,\n    Paginator,\n    Filter,\n    Spinner,\n  },\n  mounted() {\n    this.page = 1;\n    this.countItems();\n    //this.loadItems();\n  },\n};\n</script>\n\n<style scoped>\n.table {\n  width: 100%;\n  height: 100%;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}