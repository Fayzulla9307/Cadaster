{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-4a057771\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"item\"\n};\nconst _hoisted_2 = {\n  style: {\n    \"border-style\": \"none !important\",\n    \"width\": \"100%\"\n  }\n};\nconst _hoisted_3 = {\n  style: {\n    \"border-style\": \"none !important\",\n    \"width\": \"100%\"\n  }\n};\nconst _hoisted_4 = {\n  style: {\n    \"width\": \"50px\",\n    \"border-style\": \"none !important\"\n  }\n};\nconst _hoisted_5 = {\n  style: {\n    \"width\": \"50px\"\n  }\n};\nconst _hoisted_6 = {\n  style: {\n    \"width\": \"100%\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_OkModal = _resolveComponent(\"OkModal\");\n  const _component_ConfirmModal = _resolveComponent(\"ConfirmModal\");\n  const _component_BootstrapIcon = _resolveComponent(\"BootstrapIcon\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.showError ? (_openBlock(), _createBlock(_component_OkModal, {\n    key: 0,\n    message: $data.errorMessage,\n    header: $data.header,\n    onConfirm: $options.hideErrorMessage\n  }, null, 8 /* PROPS */, [\"message\", \"header\", \"onConfirm\"])) : _createCommentVNode(\"v-if\", true), $data.showAuthError ? (_openBlock(), _createBlock(_component_OkModal, {\n    key: 1,\n    message: $data.authMessage,\n    header: $data.authHeader,\n    onConfirm: $options.hideAuthMessage\n  }, null, 8 /* PROPS */, [\"message\", \"header\", \"onConfirm\"])) : _createCommentVNode(\"v-if\", true), $data.showConfirmModal ? (_openBlock(), _createBlock(_component_ConfirmModal, {\n    key: 2,\n    message: $data.confirmMessage,\n    header: $data.confirmHeader,\n    onConfirm: $options.onConfirm,\n    onCancel: $options.onCancel\n  }, null, 8 /* PROPS */, [\"message\", \"header\", \"onConfirm\", \"onCancel\"])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"table\", _hoisted_2, [_createElementVNode(\"tr\", _hoisted_3, [_createElementVNode(\"td\", _hoisted_4, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.removeItem && $options.removeItem(...args)),\n    class: \"btn btn-dark btn-md btn-block btn-delete\",\n    style: {\n      \"float\": \"left\",\n      \"width\": \"40px\"\n    }\n  }, [_createVNode(_component_BootstrapIcon, {\n    icon: \"trash\"\n  })])]), _createElementVNode(\"td\", _hoisted_5, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.saveItem && $options.saveItem(...args)),\n    class: \"btn btn-dark btn-md btn-block btn-edit\",\n    style: {\n      \"float\": \"left\",\n      \"width\": \"40px\"\n    }\n  }, [_createVNode(_component_BootstrapIcon, {\n    icon: \"save\"\n  })])]), _createElementVNode(\"td\", _hoisted_6, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control form-control-md\",\n    style: {\n      \"display\": \"inline\",\n      \"width\": \"calc(100%)\"\n    },\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.districtName = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.districtName]])])])])]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","$data","showError","_createBlock","_component_OkModal","message","errorMessage","header","onConfirm","$options","hideErrorMessage","showAuthError","authMessage","authHeader","hideAuthMessage","showConfirmModal","_component_ConfirmModal","confirmMessage","confirmHeader","onCancel","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","onClick","_cache","args","removeItem","_createVNode","_component_BootstrapIcon","icon","_hoisted_5","saveItem","_hoisted_6","type","districtName","$event"],"sources":["/Users/fayzulla/Dev/kadastr/frontend/kadastr/src/components/DistrictItem.vue"],"sourcesContent":["<template>\n  <div class=\"item\">\n    <OkModal\n      v-if=\"showError\"\n      v-bind:message=\"errorMessage\"\n      v-bind:header=\"header\"\n      v-on:confirm=\"hideErrorMessage\"\n    />\n    <OkModal\n      v-if=\"showAuthError\"\n      v-bind:message=\"authMessage\"\n      v-bind:header=\"authHeader\"\n      v-on:confirm=\"hideAuthMessage\"\n    />\n    <ConfirmModal\n      v-if=\"showConfirmModal\"\n      v-bind:message=\"confirmMessage\"\n      v-bind:header=\"confirmHeader\"\n      v-on:confirm=\"onConfirm\"\n      v-on:cancel=\"onCancel\"\n    />\n    <table style=\"border-style: none !important; width: 100%\">\n      <tr style=\"border-style: none !important; width: 100%\">\n        <td style=\"width: 50px; border-style: none !important\">\n          <button\n            @click=\"removeItem\"\n            class=\"btn btn-dark btn-md btn-block btn-delete\"\n            style=\"float: left; width: 40px\"\n          >\n            <BootstrapIcon icon=\"trash\" />\n          </button>\n        </td>\n        <td style=\"width: 50px\">\n          <button\n            @click=\"saveItem\"\n            class=\"btn btn-dark btn-md btn-block btn-edit\"\n            style=\"float: left; width: 40px\"\n          >\n            <BootstrapIcon icon=\"save\" />\n          </button>\n        </td>\n        <td style=\"width: 100%\">\n          <input\n            type=\"text\"\n            class=\"form-control form-control-md\"\n            style=\"display: inline; width: calc(100%)\"\n            v-model=\"districtName\"\n          />\n        </td>\n      </tr>\n    </table>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport BootstrapIcon from \"@dvuckovic/vue3-bootstrap-icons\";\nimport ConfirmModal from \"../components/ConfirmModal.vue\";\nimport OkModal from \"./OkModal.vue\";\n\nexport default {\n  name: \"DistrictItem\",\n  props: [\n    \"displayButtons\",\n    \"id_republic\",\n    \"id_area\",\n    \"id_district\",\n    \"district_name\",\n  ],\n  data() {\n    return {\n      header: \"Сохранение данных формы\",\n      errorMessage: \"\",\n      showError: false,\n      areaId: this.id_area,\n      republicId: this.id_republic,\n      districtId: this.id_district,\n      districtName: this.district_name,\n      confirmMessage: \"\",\n      confirmHeader: \"\",\n      showConfirmModal: false,\n      showAuthError: false,\n      authMessage: \"Доступ запрещен\",\n      authHeader: \"Ошибка безопасности\",\n    };\n  },\n  methods: {\n    hideAuthMessage() {\n      this.showAuthError = false;\n    },\n    hideErrorMessage() {\n      this.showError = false;\n      this.$emit(\"district-updated\", {});\n    },\n    onConfirm() {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      const url = this.$BASE_URL + \"/api/delete_district/\";\n      axios\n        .post(\n          url,\n          {\n            republic_id: this.republicId,\n            area_id: this.areaId,\n            district_id: this.districtId,\n          },\n          { headers }\n        )\n        .then((response) => {\n          if (response.data[0].auth_fail) {\n            this.showAuthError = true;\n            return;\n          }\n          this.$emit(\"district-updated\", {});\n        });\n    },\n    onCancel() {\n      this.showConfirmModal = false;\n    },\n    removeItem(e) {\n      this.confirmMessage =\n        \"Удалить район? Это приведет к потере данных (месторождений, участков, лицензий, запасов, а также всех движений и исторических данных!)\";\n      this.confirmHeader = \"Удаление данных!\";\n      this.showConfirmModal = true;\n      e.preventDefault();\n    },\n    saveItem(e) {\n      const token = sessionStorage.getItem(\"token\");\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      };\n      const url = this.$BASE_URL + \"/api/update_district/\";\n      axios\n        .post(\n          url,\n          {\n            republic_id: this.republicId,\n            area_id: this.areaId,\n            district_id: this.districtId,\n            distrcit_name: this.districtName,\n          },\n          { headers }\n        )\n        .then((response) => {\n          if (response.data[0].auth_fail) {\n            this.showAuthError = true;\n            return;\n          }\n          this.showError = true;\n          this.errorMessage = \"Данные сохранены\";\n        });\n      e.preventDefault();\n    },\n  },\n  components: {\n    BootstrapIcon,\n    OkModal,\n    ConfirmModal,\n  },\n  mounted() {},\n};\n</script>\n\n<style scoped>\nimg {\n  height: 30px;\n  width: 30px;\n}\n\n.item {\n  width: calc(100%);\n  height: 50px;\n  font-weight: bolder;\n  font-family: \"Gill Sans\", \"Gill Sans MT\", Calibri, \"Trebuchet MS\", sans-serif;\n  border-style: none !important;\n}\n.delete-btn {\n  height: 30px;\n  display: inline;\n  /*margin-right: 5px;*/\n}\n.save-btn {\n  height: 30px;\n  display: inline-block;\n  /*margin-right: 5px;*/\n}\n.inputfield {\n  display: inline;\n  height: 30px;\n  width: 330px;\n}\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAM;;EAoBRC,KAAkD,EAAlD;IAAA;IAAA;EAAA;AAAkD;;EACnDA,KAAkD,EAAlD;IAAA;IAAA;EAAA;AAAkD;;EAChDA,KAAkD,EAAlD;IAAA;IAAA;EAAA;AAAkD;;EASlDA,KAAmB,EAAnB;IAAA;EAAA;AAAmB;;EASnBA,KAAmB,EAAnB;IAAA;EAAA;AAAmB;;;;;uBAxC7BC,mBAAA,CAkDM,OAlDNC,UAkDM,GAhDIC,KAAA,CAAAC,SAAS,I,cADjBC,YAAA,CAKEC,kBAAA;;IAHOC,OAAO,EAAEJ,KAAA,CAAAK,YAAY;IACrBC,MAAM,EAAEN,KAAA,CAAAM,MAAM;IAChBC,SAAO,EAAEC,QAAA,CAAAC;oGAGRT,KAAA,CAAAU,aAAa,I,cADrBR,YAAA,CAKEC,kBAAA;;IAHOC,OAAO,EAAEJ,KAAA,CAAAW,WAAW;IACpBL,MAAM,EAAEN,KAAA,CAAAY,UAAU;IACpBL,SAAO,EAAEC,QAAA,CAAAK;oGAGRb,KAAA,CAAAc,gBAAgB,I,cADxBZ,YAAA,CAMEa,uBAAA;;IAJOX,OAAO,EAAEJ,KAAA,CAAAgB,cAAc;IACvBV,MAAM,EAAEN,KAAA,CAAAiB,aAAa;IACvBV,SAAO,EAAEC,QAAA,CAAAD,SAAS;IAClBW,QAAM,EAAEV,QAAA,CAAAU;gHAEfC,mBAAA,CA6BQ,SA7BRC,UA6BQ,GA5BND,mBAAA,CA2BK,MA3BLE,UA2BK,GA1BHF,mBAAA,CAQK,MARLG,UAQK,GAPHH,mBAAA,CAMS;IALNI,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEjB,QAAA,CAAAkB,UAAA,IAAAlB,QAAA,CAAAkB,UAAA,IAAAD,IAAA,CAAU;IAClB7B,KAAK,EAAC,0CAA0C;IAChDC,KAAgC,EAAhC;MAAA;MAAA;IAAA;MAEA8B,YAAA,CAA8BC,wBAAA;IAAfC,IAAI,EAAC;EAAO,G,KAG/BV,mBAAA,CAQK,MARLW,UAQK,GAPHX,mBAAA,CAMS;IALNI,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEjB,QAAA,CAAAuB,QAAA,IAAAvB,QAAA,CAAAuB,QAAA,IAAAN,IAAA,CAAQ;IAChB7B,KAAK,EAAC,wCAAwC;IAC9CC,KAAgC,EAAhC;MAAA;MAAA;IAAA;MAEA8B,YAAA,CAA6BC,wBAAA;IAAdC,IAAI,EAAC;EAAM,G,KAG9BV,mBAAA,CAOK,MAPLa,UAOK,G,gBANHb,mBAAA,CAKE;IAJAc,IAAI,EAAC,MAAM;IACXrC,KAAK,EAAC,8BAA8B;IACpCC,KAA0C,EAA1C;MAAA;MAAA;IAAA,CAA0C;+DACjCG,KAAA,CAAAkC,YAAY,GAAAC,MAAA;iDAAZnC,KAAA,CAAAkC,YAAY,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}