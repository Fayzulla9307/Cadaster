{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport OkModal from \"../components/OkModal.vue\";\nimport BootstrapIcon from \"@dvuckovic/vue3-bootstrap-icons\";\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      failed: false,\n      dsOffer: \"Использование лицензионного ключа для входа\",\n      dsNotImplMsg: \"Обратитесь к производителю ПО для консультации\",\n      showDsModal: false\n    };\n  },\n  methods: {\n    login(e) {\n      const data = {\n        username: this.username,\n        password: this.password\n      };\n      const headers = {\n        \"Content-Type\": \"application/json\"\n      };\n      axios.post(this.$BASE_URL + \"/auth/signin/\", data, {\n        headers\n      }).then(response => {\n        if (response.data[0].success) {\n          sessionStorage.setItem(\"token\", response.data[0].token);\n          this.$parent.isAuthenticated = true;\n          this.$router.push(\"/deposits/\");\n        }\n        this.failed = !response.data[0].success;\n      });\n      e.preventDefault();\n    },\n    dslogin(e) {\n      this.showDsModal = true;\n      e.preventDefault();\n    },\n    closeDsModal() {\n      this.showDsModal = false;\n    }\n  },\n  components: {\n    OkModal,\n    BootstrapIcon\n  }\n};","map":{"version":3,"names":["axios","OkModal","BootstrapIcon","name","data","username","password","failed","dsOffer","dsNotImplMsg","showDsModal","methods","login","e","headers","post","$BASE_URL","then","response","success","sessionStorage","setItem","token","$parent","isAuthenticated","$router","push","preventDefault","dslogin","closeDsModal","components"],"sources":["/Users/fayzulla/Dev/kadastr/frontend/kadastr/src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-div\">\n    <OkModal\n      v-bind:header=\"dsOffer\"\n      v-bind:message=\"dsNotImplMsg\"\n      v-if=\"showDsModal\"\n      v-on:confirm=\"closeDsModal\"\n    />\n    <h3>\n      Система ведения государственного геологического кадастра Республики\n      Узбекистан\n    </h3>\n    <form class=\"login-form\">\n      <div class=\"form-group\">\n        <label>Учетная запись</label>\n        <div class=\"input-group input-group-lg\">\n          <div class=\"input-group-addon\">\n            <span class=\"input-group-text\">\n              <BootstrapIcon icon=\"person\" size=\"2x\" />\n            </span>\n          </div>\n          <input\n            type=\"username\"\n            class=\"form-control form-control-lg\"\n            v-model=\"username\"\n          />\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <label>Пароль</label>\n        <div class=\"input-group input-group-lg\">\n          <div class=\"input-group-append\">\n            <span class=\"input-group-text\">\n              <BootstrapIcon icon=\"lock\" size=\"2x\" />\n            </span>\n          </div>\n          <input\n            type=\"password\"\n            class=\"form-control form-control-lg\"\n            v-model=\"password\"\n          />\n        </div>\n      </div>\n      <div class=\"form-group\" style=\"margin-top: 10px\">\n        <button @click=\"login\" class=\"btn btn-dark btn-lg btn-block\">\n          <BootstrapIcon icon=\"arrow-right-square\" size=\"1x\" />\n          Войти\n        </button>\n        <button\n          @click=\"dslogin\"\n          class=\"btn btn-dark btn-lg btn-block\"\n          style=\"float: right\"\n        >\n          <BootstrapIcon icon=\"key\" size=\"1x\" />\n          Войти с цифровым ключом\n        </button>\n      </div>\n      <div class=\"form-group\" v-if=\"failed\" style=\"margin-top: 10px\">\n        <div class=\"alert alert-danger\" role=\"alert\">\n          Неверный логин или пароль\n        </div>\n      </div>\n    </form>\n    Мы поддерживаем RSA ключи Tokey®JCOP3 от CrypToken\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport OkModal from \"../components/OkModal.vue\";\nimport BootstrapIcon from \"@dvuckovic/vue3-bootstrap-icons\";\n\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      failed: false,\n      dsOffer: \"Использование лицензионного ключа для входа\",\n      dsNotImplMsg: \"Обратитесь к производителю ПО для консультации\",\n      showDsModal: false,\n    };\n  },\n  methods: {\n    login(e) {\n      const data = { username: this.username, password: this.password };\n      const headers = {\n        \"Content-Type\": \"application/json\",\n      };\n      axios\n        .post(this.$BASE_URL + \"/auth/signin/\", data, { headers })\n        .then((response) => {\n          if (response.data[0].success) {\n            sessionStorage.setItem(\"token\", response.data[0].token);\n            this.$parent.isAuthenticated = true;\n            this.$router.push(\"/deposits/\");\n          }\n          this.failed = !response.data[0].success;\n        });\n      e.preventDefault();\n    },\n    dslogin(e) {\n      this.showDsModal = true;\n      e.preventDefault();\n    },\n    closeDsModal() {\n      this.showDsModal = false;\n    },\n  },\n  components: {\n    OkModal,\n    BootstrapIcon,\n  },\n};\n</script>\n\n<style scoped>\nh3 {\n  color: black;\n  text-align: center;\n}\n\n.login-div {\n  position: absolute;\n\n  width: 450px;\n  height: 300px;\n\n  /* Center form on page horizontally & vertically */\n  top: 50%;\n  left: 50%;\n  margin-top: -150px;\n  margin-left: -225px;\n}\n\n.login-form {\n  width: 450px;\n  height: 300px;\n\n  background: white;\n  border-radius: 10px;\n\n  margin: 0;\n  padding: 0;\n}\n</style>\n"],"mappings":";AAoEA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,OAAM,MAAO,2BAA2B;AAC/C,OAAOC,aAAY,MAAO,iCAAiC;AAE3D,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE,6CAA6C;MACtDC,YAAY,EAAE,gDAAgD;MAC9DC,WAAW,EAAE;IACf,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,KAAKA,CAACC,CAAC,EAAE;MACP,MAAMT,IAAG,GAAI;QAAEC,QAAQ,EAAE,IAAI,CAACA,QAAQ;QAAEC,QAAQ,EAAE,IAAI,CAACA;MAAS,CAAC;MACjE,MAAMQ,OAAM,GAAI;QACd,cAAc,EAAE;MAClB,CAAC;MACDd,KAAI,CACDe,IAAI,CAAC,IAAI,CAACC,SAAQ,GAAI,eAAe,EAAEZ,IAAI,EAAE;QAAEU;MAAQ,CAAC,EACxDG,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAIA,QAAQ,CAACd,IAAI,CAAC,CAAC,CAAC,CAACe,OAAO,EAAE;UAC5BC,cAAc,CAACC,OAAO,CAAC,OAAO,EAAEH,QAAQ,CAACd,IAAI,CAAC,CAAC,CAAC,CAACkB,KAAK,CAAC;UACvD,IAAI,CAACC,OAAO,CAACC,eAAc,GAAI,IAAI;UACnC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,YAAY,CAAC;QACjC;QACA,IAAI,CAACnB,MAAK,GAAI,CAACW,QAAQ,CAACd,IAAI,CAAC,CAAC,CAAC,CAACe,OAAO;MACzC,CAAC,CAAC;MACJN,CAAC,CAACc,cAAc,EAAE;IACpB,CAAC;IACDC,OAAOA,CAACf,CAAC,EAAE;MACT,IAAI,CAACH,WAAU,GAAI,IAAI;MACvBG,CAAC,CAACc,cAAc,EAAE;IACpB,CAAC;IACDE,YAAYA,CAAA,EAAG;MACb,IAAI,CAACnB,WAAU,GAAI,KAAK;IAC1B;EACF,CAAC;EACDoB,UAAU,EAAE;IACV7B,OAAO;IACPC;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}